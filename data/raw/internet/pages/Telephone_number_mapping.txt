Telephone number mapping is a system of unifying the international telephone number system of the public switched telephone network with the Internet addressing and identification name spaces. Internationally, telephone numbers are systematically organized by the E.164 standard, while the Internet uses the Domain Name System (DNS) for linking domain names to IP addresses and other resource information. Telephone number mapping systems provide facilities to determine applicable Internet communications servers responsible for servicing a given telephone number using DNS queries.
The most prominent facility for telephone number mapping is the E.164 number to URI mapping (ENUM) standard. It uses special DNS record types to translate a telephone number into a Uniform Resource Identifier (URI) or IP address that can be used in Internet communications.


== Rationale ==
Being able to dial telephone numbers the way customers have come to expect is considered crucial for the convergence of classic telephone service (PSTN) and Internet telephony (Voice over IP, VoIP), and for the development of new IP multimedia services. The problem of a single universal personal identifier for multiple communication services can be solved with different approaches. One simple approach is the Electronic Number Mapping System (ENUM), developed by the IETF, using existing E.164 telephone numbers, protocols and infrastructure to indirectly access different services available under a single personal identifier. ENUM also permits connecting the IP world to the telephone system in a seamless manner.


== System details ==
For an ENUM subscriber to be able to activate and use the ENUM service, it needs to obtain three elements from a Registrar:

A personal Uniform Resource Identifier (URI) to be used on the IP part of the network, as explained below.
One E.164 regular personal telephone number associated with the personal URI, to be used on the PSTN part of the network.
Authority to write their call forwarding/termination preferences in the NAPTR record accessible via the personal URI.
This works as follows: (1) the Registrar provides the Subscriber (or Registrant) with a domain name, the URI, that will be used for accessing a DNS server to fetch a NAPTR record, (2) a personal E.164 telephone number (the ENUM number). The URI domain name of (1) is biunivocally associated (one-to-one mapped) to the subscriber E.164 ENUM number of (2). Finally (3) the NAPTR record corresponding to the subscriber URI contains the subscriber call forwarding/termination preferences.
Therefore, if a calling party being at the PSTN network dials a called party ENUM number by touch typing the E.164 called party number, the number will be translated at the ENUM gateway into the corresponding URI. This URI will be used for looking-up and fetching the NAPTR record obtaining the called party wishes about how the call should be forwarded or terminated (either on IP or on PSTN terminations) – the so-called access information – which the registrant (the called party) has specified by writing his/her choice at the NAPTR record ("Naming Authority Pointer Resource Records" as defined in RFC 3403), such as e-mail addresses, a fax number, a personal website, a VoIP number, mobile telephone numbers, voice mail systems, IP-telephony addresses, web pages, GPS coordinates, call diversions or instant messaging. Alternatively, when the calling party is at the IP side, the User Agent (UA) piece of software of the dialler will allow to dial a E.164 number, but the dialler UA will convert it into a URI, to be used for looking-up at the ENUM gateway DNS and fetch the NAPTR record obtaining the called party wishes about how the call should be forwarded or terminated (again, either on IP or on PSTN terminations).
Calling by using a new personal E.164 number (the ENUM number) to look-up at a database is therefore an indirect calling support service.
The ITU ENUM allocates a specific zone, namely "e164.arpa" for use with ENUM E.164 numbers on the IP side of the network. RFC 6116 defines how any E.164 number, such as +1 555 42 42 can be transformed into a URI, by reversing the numbers, separating them with dots and adding the e164.arpa suffix thus: 2.4.2.4.5.5.5.1.e164.arpa
The URI can then be used for obtaining the Internet Protocol addresses for services such as the Session Initiation Protocol (SIP) VoIP telephony. In the DNS, NAPTR records are used for setting the subscriber call forwarding/termination preferences. Therefore, the whole system can 'translate' E.164 addresses to SIP addresses. An example NAPTR record is:

This example specifies that if you want to use the "E2U+sip" service, you should use sip:phoneme@example.net as the address. The regular expression can be used by a telephone company to easily assign addresses to all of its clients. For example, if your number is +15554242, your SIP address is sip:4242@555telco.example.net; if your number is +15551234, your SIP address is sip:1234@555telco.example.net.
The following Figure illustrates how ENUM works by giving an example: Subscriber A sets out to call Subscriber B. 

The user agent of an ENUM-enabled subscriber terminal device, or a PBX, or a gateway, translates the request for the number +34 98 765 4321 in accordance with the rule described in RFC 6116  into the ENUM domain 1.2.3.4.5.6.7.8.9.4.3.e164.arpa.
A request is sent to the DNS for the NAPTR record of the domain name 1.2.3.4.5.6.7.8.9.4.3.e164.arpa.
The query returns a result set of NAPTR records, as per RFC 3403. In the example above, the response is an address that can be reached in the Internet using the VoIP protocol SIP per RFC 3261.
The terminal application now sets up a communication link, and the call is routed via the Internet.
The ENUM user does not notice anything of this reversal and the DNS database look-up, as this is done automatically behind the scenes using a user agent software in their PC or terminal, or at the PABX or Gateway. For instance, when the user types the telephone number in their web browser ENUM enabled agent and indicates what item of information they are looking for (email address, telephone number, web address, etc.) in the PC or terminal the number is converted to a domain name. This is sent to ENUM servers on the Internet, which send back the NAPTR records associated with the name. The access information and any priority indicated for them are stored in these. The user gets the requested address back on their PC or terminal. ENUM therefore in fact functions as a mechanism for translating a telephone number into a domain name with the requested address or number associated with it, but without the user viewing how this is done, just as they are currently unaware that they are using the DNS when they make a connection with the Internet or what is going on at the telephone switch when they make a call.


== Uses ==


=== Call forwarding ===
 
One way of doing call forwarding with ENUM is illustrated in the next figure. The caller uses the telephone to dial the number of another subscriber, which leads to an ENUM lookup (such as is provided by SIP Broker). The DNS responds to the caller by returning a list with NAPTR records for VoIP communication, telephone numbers and email addresses. Next, an attempt will be made, using the VoIP record from this list, to establish a connection with the subscriber. If the subscriber is not online, the next record selected will be that for a connection to a PSTN or mobile telephone. If this attempt fails too, a voice message will be sent to the subscriber via a listed email address.
Subdomains of e164.arpa are delegated on a country-code basis by the ITU. Each delegation is normally made to a regulatory body designated by the national government for the country code concerned. What happens at a country level is a National Matter. In general the conventional DNS registry-registrar model is used. The national ENUM registry manages and operates the DNS infrastructure and related systems for country-code.e164.arpa. It takes registration requests from registrars who are agents of the end users, the registrants. Registrars are typically VoIP providers and telcos who bundle an ENUM registration as part of a VoIP service package. People using an ENUM-enabled VoIP service can dial the registrant's existing number and be connected to the registrant's VoIP telephone over the Internet instead of using the PSTN. When they call someone who does not use ENUM, calls complete over the Public Switched Telephone Network or PSTN in the usual manner. Support for .e164.arpa varies widely between countries; many do not support it at all.
Alternative ENUM-like registries have also emerged. These services verify PSTN numbers and can be used in addition to or as an alternative to e164.arpa. However, if the registry in which a callee's number is not known by the caller, the choice between registries can create confusion and complexity. Multiple DNS lookups may be needed and it is far from simple to know which E.164 numbers are registered in which of these alternate ENUM-like trees. It is also possible that if an E.164 number is registered in several of these trees, there can be inconsistencies in the information that is returned. Furthermore, the subscriber "owning" a particular E.164 number may not be aware that their number has been entered into one or more of these alternate ENUM-like trees or what information these alternate trees are returning for their E.164 number.


=== Called party facility ===
ENUM can also be viewed as a called party facility. Basically, it is an indirect dialling service designed to work seamlessly on PSTN and VoIP that builds on the great value of the E.164 numbers: billions of people knowing how to dial using numbers.
If the called person has opted to use ENUM she/he will have published the ENUM number and have entered (via ENUM NAPTR) his/her wishes for how the call should be terminated. This might be a single VoIP identifier, but most likely it will be a list of how the call should be forwarded to various fixed-line, cellphones, secretarial or voice mail services, either at the IP or at the PSTN side of the network. It is the called party choice to opt-in ENUM and also to decide to let the calling party know her/his wishes.
Today when a user places a regular phone call, he has to begin deciding how to establish the call with the other party: via VoIP, Fixed-line PSTN, cellphone, entering a URI or dialling a number. With ENUM indirect dialling it is the called party wishes that matter and solve that decision. Another benefit of indirect dialling is to free the user to change his phone telco, webpage, IMS, email or whatever telecom service he uses without having to tell all his contacts about that.
A presence enhanced ENUM facility having various profiles could automatically change the called party wishes as a function of where he/she is available. This could be a mechanism to automatically switch between cellphone and VoIP to the most convenient (or the less costing) termination.


== ENUM varieties ==
One potential source of confusion, when talking about ENUM, is the variety of ENUM implementations in place today. Quite often, people speaking of ENUM are really referring to only one of the following: 

Public ENUM: The original vision of ENUM as a global, public directory-like database, with subscriber opt-in capabilities and delegation at the country code level in the e164.arpa domain. This is also referred to as user ENUM.
Open Enum: An effort of mobile carriers and other parties involved in mobile numbering plans to generate complete, public database of all international numbering plan, available via public dns.
Private ENUM: A carrier, VoIP operator or ISP may use ENUM techniques within its own networks, in the same way DNS is used internally to networks.
Carrier ENUM: Groups of carriers or communication service providers agree to share subscriber information via ENUM in private peering relationships. The carriers themselves control subscriber information, not the individuals. Carrier ENUM is also referred to as infrastructure ENUM, and is being the subject of new IETF recommendations to support VoIP peering.....


== Parties having a direct interest in ENUM ==
Various parties are involved with ENUM. These include:

The registrant or subscriber
The registrant is the person or subscriber that makes his access information available to others through ENUM. The registrant or subscriber is thus the person whose information has been included in ENUM and must not be confused with the person who uses the Internet to find an address through ENUM.
The registrar
The registrar is the party who manages the registrant’s access information and ensures that it is publicly available on the Internet.
The registry
The registry is the manager of a national ENUM zone. The registry forms, as it were, the top of the national ENUM hierarchy and ensures that reference is made to the registrars’ servers on which the access information is located.
Because of the hierarchical structure of the DNS, there can only be one registry for every national ENUM zone. To prevent abuse of this position, requirements are strict with respect to the impartiality of the registry and the costs and quality of the service. In addition every registrant must receive equal and open access.
The government or the regulator
Usually a governmental entity or a regulatory authority has control over the National zone of ENUM and will play a role in the appointment of the registry.
The number holder operator
Telephony services or telecommunication services operators have been assigned blocks of numbers by the regulator. They subsequently enable their users to use individual telephone numbers from those number blocks. Examples are the numbers for fixed telephony and mobile telephony. The number holder operator will be interconnected to other operators and will receive from them calls to his assigned range of numbers, for the calls to be terminated.
In ENUM the number holder operator will typically be the gateway operator or, alternatively, will have an arrangement with a gateway operator, to whom he will transit the calls.
But ENUM is a personal number, meant to be valid for the registrant life. Consequently in ENUM once the operator number holder assigns a number to a registrant, the number belongs to that registrant during his/her entire life.
Hence, if the registrant wishes to change his initial number holder operator (that might also coincide being his gateway operator) there have to be provisions for the ENUM number to be ported from the initial operator to other number holder operators.
You can find more information and further parties involved in the ENUM ecosystem in RFC 4725.


== See also ==
Carrier of Record
DNS mapping of E.164 numbers


== References ==
RFC 6116 - The E.164 to Uniform Resource Identifiers (URI) Dynamic Delegation Discovery System (DDDS) Application (ENUM)
RFC 6117 - IANA Registration of Enumservices: Guide, Template, and IANA Considerations
RFC 4725 - ENUM Validation Architecture
RFC 3403 - Dynamic Delegation Discovery System (DDDS) Part Three: The Domain Name System (DNS) Database
ENUM - The bridge between telephony and internet Archived 2005-09-26 at the Wayback Machine
ENUM - It's All in the Numbers
http://www.itu.int/osg/spu/enum/


== External links ==
GSMA PathFinder Carrier ENUM Technology
CircleID: ENUM Convergence
ENUM: Mapping the E.164 Number Space into the DNS