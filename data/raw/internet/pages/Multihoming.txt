Multihoming is the practice of connecting a host or a computer network to more than one network. This can be done in order to increase reliability or performance.
A typical host or end-user network is connected to just one network. Connecting to multiple networks can increase reliability because if one connection fails, packets can still be routed through the remaining connection. Connecting to multiple networks can also improve performance because data can be transmitted and received through the multiple connections simultaneously multiplying throughput and, depending on the destination, it may be more efficient to route through one network or the other.


== Variants ==
There are several different ways to perform multihoming.


=== Host multihoming ===
A single host may be connected to multiple networks.  For example, a mobile phone might be simultaneously connected to a WiFi network and a 4G network, and a desktop computer might be connected to both a home network and a VPN.  A multihomed host usually is assigned multiple addresses, one per connected network.


=== Classic multihoming ===
In classic multihoming, a network is connected to multiple providers and uses its own range of addresses (typically from a Provider Independent (PI) range).  The network's edge routers communicate with the providers using a dynamic routing protocol, typically BGP, which announces the network's address range to all providers.  If one of the links fails, the dynamic routing protocol recognizes the failure within seconds or minutes and reconfigures its routing tables to use the remaining links, transparently to the hosts.
Classic multihoming is costly, since it requires the use of address space that is accepted by all providers, a public Autonomous System (AS) number, and a dynamic routing protocol.  Since multihomed address space cannot be aggregated, it causes growth of the global routing table.


=== Multihoming with multiple addresses ===
In this approach, the network is connected to multiple providers, and assigned multiple address ranges, one for each provider.  Hosts are assigned multiple addresses, one for each provider.
Multihoming with multiple addresses is cheaper than classic multihoming, and can be used without any cooperation from the providers (e.g. in a home network) but requires additional technology in order to perform routing:

for incoming traffic, hosts must be associated with multiple A or AAAA DNS records so that they are reachable through all providers;
for outgoing traffic, a technique such as source-specific routing must be used to route packets through the correct provider, and reasonable source address selection policies must be implemented by hosts.


== Caveats ==
When multihoming is used to improve reliability, care must be taken to eliminate any single point of failure (SPOF):

Upstream connectivity:  A given network operations center must have multiple upstream links to independent providers. Furthermore, to lessen the possibility of simultaneous damage to all upstream links, the physical location of each of these upstream links should be physically diverse: far enough apart that a piece of machinery (such as a backhoe) won't accidentally sever all connections at the same time.
Routers: Routers and switches must be positioned such that no single piece of network hardware controls all network access to a given host. In particular, it is not uncommon to see multiple Internet uplinks all converge on a single edge router. In such a configuration, the loss of that single router disconnects the Internet uplink, despite the fact that multiple ISPs are otherwise in use.
Host connectivity: A "reliable" host must be connected to the network over multiple network interfaces, each connected to a separate router or switch. Alternatively, and preferably, the function of a given host could be duplicated across multiple computers, each of which is connected to a different router or switch.
Referencing entities: Not only must a host be accessible, but in many cases it must also be "referenced" to be useful. For most servers, this means in particular that the name resolution to that server be functional. For example, if the failure of a single element blocks users from properly resolving the DNS name of that server, then the server is effectively inaccessible, despite its otherwise connected state.
By increasing the number of interfaces and links being used and making routing less deterministic, multihoming complicates network administration.


== IPv4 ==
Classic multihoming is the dominant technique for IPv4.  This requires that a network have its own public IP address range and a public AS number.
While multihoming with multiple addresses has been implemented for IPv4, it is not generally used, as host implementations do not deal well with multiple addresses per interface which requires the use of "virtual interfaces". It is also possible to implement multihoming for IPv4 using multiple NAT gateways.


== IPv6 ==
Both classic multihoming and multihoming with multiple addresses may be used in IPv6.


=== Classic multihoming ===
Provider Independent Address Space (PI) is available in IPv6. This technique has the advantage of working like IPv4, supporting traffic balancing across multiple providers, and maintaining existing TCP and UDP sessions through cut-overs.  Critics say that the increased size of routing tables needed to handle multi-homing in this way will overwhelm current router hardware.  Proponents say that new hardware will be able to handle the increase due to cheaper memory, which drops in price according to Moore's law. Proponents also say this is the only viable solution right now, and the worse is better philosophy supports the idea that it is better to deploy an imperfect solution now than a perfect solution after it is too late.
Because many ISPs filter out route announcements with small prefixes, this will generally require a large "ISP-sized" IP allocation, such as a /32, to ensure global reachability. Using such large prefixes is an inefficient use of IPv6's address space; there are only about 4 billion /32 prefixes. However, from a pragmatic perspective, allocating a /32 is equivalent in global address space cost to allocating a single IPv4 address, and this may be acceptable if, as seems to be likely for the foreseeable future, the number of multihomed sites can be numbered only in the millions, as opposed to the many billions of non-multihomed endpoints which are anticipated to comprise the vast majority of IPv6 endpoints. Some regional Internet registries (RIR) such as RIPE have started to allocate /48 from a specific prefix for this purpose. RIPE allocates IPv6 provider-independent address spaces /48 or shorter from 2001:0678::/29.


=== Multihoming with multiple addresses ===
Multihoming with multiple addresses has been implemented for IPv6.  For outgoing traffic, this requires support on the host, either protocol agnostic (Multipath TCP, SCTP, QUIC, etc.) or specific to IPv6 (e.g. SHIM6).


=== Other solutions ===
Automated renumbering. If one uplink goes down, all addresses in the network will be renumbered into a new /48 subnet. DNS and firewall records must be updated to redirect traffic to a different /48 subnet.  This renumbering will break live TCP and UDP sessions.
Locator/Identifier Separation Protocol (LISP)


== See also ==


== References ==


== Further reading ==
Akella, A.; Maggs, B.; Seshan, S.; Shaikh, A. & Sitaraman, R. (2003). "A measurement-based analysis of multihoming". Proceedings of the 2003 conference on Applications, technologies, architectures, and protocols for computer communications. pp. 353–364. doi:10.1145/863955.863995. ISBN 1-58113-735-4. S2CID 1801040.
De Launois, C.; Bagnulo, M. (2006). "The paths toward IPv6 multihoming". IEEE Communications Surveys & Tutorials. 8 (2): 38–51. doi:10.1109/COMST.2006.315853. S2CID 37377959.
Hau, T.; Burghardt, D. & Brenner, W. (2011). "Multihoming, content delivery networks, and the market for Internet connectivity". Telecommunications Policy. 35 (6): 532–542. doi:10.1016/j.telpol.2011.04.002.