The Media Transfer Protocol (MTP) is an extension to the Picture Transfer Protocol (PTP) communications protocol that allows media files to be transferred automatically to and from portable devices. Whereas PTP was designed for downloading photographs from digital cameras, Media Transfer Protocol allows the transfer of music files on digital audio players and media files on portable media players, as well as personal information on personal digital assistants. In 2011, MTP became the standard method to transfer files to and from Android.
The USB Implementers Forum device working group standardized MTP as a full-fledged Universal Serial Bus (USB) device class in May 2008. Since then, MTP is an official extension to PTP and shares the same class code.


== Overview ==
MTP is a high level file transfer protocol, as opposed to a general storage protocol like USB mass storage. That means that the MTP client (computer) does not see an array of byte blocks that makes up a data structure that makes up a file system, but instead speaks in terms of files and folders to the MTP device. This lets the MTP device take part in the high level operations (such as updating its metadata indexes) while keeping the integrity of its file system in its own hands. In particular, dropped transfers (such as by unplugging the USB cable too soon) do not corrupt the device file system. The non-generality of MTP has consequences for how a computer operating system can present the MTP device, both to other programs and to the user.
According to its specification, the main purpose of MTP is to facilitate communication between media devices with transient connection, a secondary purpose being to enable command and control of the connected device. A battery-powered mobile device can report its battery charge level through MTP.
The protocol was originally implemented for use across USB but extended for use across TCP/IP and Bluetooth. Windows Vista supports MTP over TCP/IP. Windows 7 and Windows Vista with the Platform Update for Windows Vista also support MTP over Bluetooth. The host connecting to an MTP device is called an MTP Initiator, whereas the device itself is an MTP Responder.
MTP allows MTP Initiators to identify the specific capabilities of device(s) with respect to file formats and functionality. In particular, MTP Initiators may have to provide passwords and other information to unlock files, or otherwise enable digital rights management. Nothing specific of this nature is in the core standard, but the features are available via vendor extensions. MTPZ, the Zune Extension to MTP, specifically denies access to files until authentication has been processed, which is only possible using Windows Media Player 10 or higher.


== Comparison with USB Mass Storage ==


=== File oriented instead of block oriented protocol ===
Mislocation: Users have reported files occasionally showing up in incorrect locations as a result of poor communication between the MTP host (e.g. smartphone) and client (e.g. computer file manager). Should a directory be moved away from the MTP host without the client detecting all files, undetected files could end up deleted without all files having been transferred successfully.


=== Performance ===
Limited support for direct modification of files (see ยง Direct modification and partial transfer features). To modify a file or its metadata, the whole file may need to be copied out of the device and then re-uploaded, which takes a long time for a large file or directory, and blocks the device for other operations in the meantime. Google's MTP implementation in Android includes extensions to deal with this limitation; however, these extensions must be supported by the host operating system.


=== Transparency to MTP-unaware software ===


=== Drivers know a fixed set of supported devices ===
Despite identifiability by the PTP/MTP USB device class, libmtp documentation indicates that the vendor and product ID combination plays a functional role in identifying an MTP device. Libmtp includes vast listings of vendor and product ID numbers of devices that it supports, along with workarounds for bugs.


=== The spec knows a fixed set of defined file formats ===
The MTP specification includes an enumeration of file formats, called object format. The use of this enumeration is in communicating supported file formats, and formats of transferred files.
Apart from some uncategorized formats in the beginning, the list of formats is grouped in categories of image, audio, video, and document formats, with each category having one "Undefined" format followed by specific formats. There is also a super-generic "Undefined object" format.
Jolla cited lack of WebM support in MTP as one reason not to support the video format in their mobile operating system Sailfish OS. It is unclear if the limitation is in the tools or the spec, other than that WebM is not defined by the MTP 1.1 spec.


== Direct modification and partial transfer features ==
These features can be used as more efficient alternatives to whole-file transfers and re-uploads:
From the MTP 1.1 spec:


=== Android extensions ===
According to go-mtpfs:


== MTP support ==


=== Windows ===


==== Adoption in Windows ====
Windows Vista and later have MTP support built in. Windows XP supports MTP if Windows Media Player 10 or a later version is installed. For the older Windows 2000, Windows 98, and Windows Me, Microsoft released a "Media Transfer Protocol Porting Kit". which contains a MTP device driver. Some manufacturers, such as Creative Technology, also provide legacy MTP drivers for some of their players; these usually consist of MTP Porting Kit files with a customized INF file describing their specific players. Windows 7's sensor platform supports sensors built into MTP-compatible devices.


==== Support by software ====
Windows does not assign drive letters or UNC pathnames to devices connected via MTP; instead, they only appear as named devices in MTP-aware applications such as Windows Explorer. Compared to devices that implement USB mass storage, such devices cannot be accessed programmatically by scripts or normal Windows programs that depend on drive letters or UNC paths. Instead, files must be manipulated using Windows Explorer or applications with specially written MTP support.
Under Windows, MTP-compatible devices support a feature called Auto Sync, which lets users configure Windows Media Player to automatically transfer all copied or newly acquired content to devices whenever they are connected - provided that content is compatible with Windows Media Player. Auto Sync is customizable so that the player will transfer only content that meets certain criteria (songs rated four stars or higher, for instance). Changes made to file properties (such as a user rating and file playback counts) on a device can be propagated back to the computer when the device is reconnected.


==== File move behavior ====
In the implementation of MTP used by Windows Explorer, files from a selection moved out of a mobile device's storage, perhaps with the goal of freeing up space, are not deleted individually from the source after each file, but instead the entire selection becomes deleted at once from the source only after the transfer has finished.
As a result, file moves aborted untimely, whether manually or unexpectedly, will not have freed up any space on the source device. (Also, attempting to copy or move files from one Android folder to another on the same device, using Window 10 or higher, does not work. Copying does not create copies, and moving only deletes the source files without creating the destination files.)


=== Unix-like systems ===
A free and open-source implementation of the Media Transfer Protocol is available as libmtp. This library incorporates product and device IDs from many sources, and is commonly used in other software for MTP support.


==== Graphical ====
GNOME applications like GNOME Files (formerly called Nautilus) and Archive Manager (formerly called File-Roller) use GIO-based GVfs to access files on MTP devices.
The KDE Project develops the MTP KIO Slave with a similar level of integration as GVfs.
Not related to GNOME or KDE is the *NIX graphical MTP-capable media player, gMTP.


==== Virtual file system ====
Several tools provide a FUSE based file system for mounting MTP devices within the Unix filesystem hierarchy, making it accessible to any program that operates on files and directories.


==== macOS ====
macOS has built-in support for PTP (through "Image Capture") but no support for MTP. Several third-party applications that support MTP are available:

Android File Transfer is a simple MTP client created by Google. It is no longer actively maintained or supported.
Android File Transfer For Linux (and macOS)
OpenMTP
MacDroid
SyncMate Expert
Commander One


=== Other operating systems ===
Newer versions of several operating systems, including AmigaOS, Android, AROS, MorphOS, Symbian OS, and HarmonyOS/OpenHarmony/Oniro support MTP, sometimes with additional drivers or software.
A disadvantage of MTP devices on Android as compared to USB mass storage is that although MTP preserves file timestamps when copying files from the Android device to one's computer, when copying in the other direction, it replaces the file modification timestamps with the time that the copy was done.


=== Other manufacturers ===
Companies, including Creative Technology, Intel, iRiver, and Samsung Electronics, that manufacture devices based on Microsoft's "Portable Media Center specification", have widely adopted MTP. Supporting devices were introduced at the 2004 Consumer Electronics Show.
After an initial period of uncertain reactions, several large media player producers such as Creative Technology and iRiver adopted the MTP protocol in place of their own protocols.


== Alternatives ==
USB Mass Storage devices and protocol
Network-attached storage (NAS)
Android Debug Bridge (faster but harder to use)


== See also ==
Windows Media
IEEE 1394 (firewire)


== References ==


== External links ==
MTP 1.1 specification
Article on Canon's adoption at the Wayback Machine (archived November 20, 2008)
MTP What, Why, How. (Android feature)
ArchLinux Wiki: Media Transfer Protocol