A compositing manager, or compositor, is software that provides applications with an off-screen buffer for each window, then composites these window buffers into an image representing the screen and writes the result into the display memory.  A compositing window manager is a window manager that is also a compositing manager.
Compositing managers may perform additional processing on buffered windows, applying 2D and 3D animated effects such as blending, fading, scaling, rotation, duplication, bending and contortion, shuffling, blurring, redirecting applications, and translating windows into one of a number of displays and virtual desktops. Computer graphics technology allows for visual effects to be rendered in real time such as drop shadows, live previews, and complex animation.
Since the screen is double buffered, it does not flicker during updates.
The most commonly used compositing managers and compositing window managers include:

for Linux, BSD, Hurd and OpenSolaris using the X Window System: The 'X server' traditionally performs compositing from numerous networked sources at high speed but stylistic preferences may require compositing duties to be performed by a co-compositor with varying effects on visual qualities, capabilities and performance factors. Some examples are Compiz, KWin, Xfwm, Enlightenment, Muffin (compositing window manager for Cinnamon DE), and Mutter compositing window managers and the xcompmgr and picom compositors;
for Linux and BSD using Wayland: the Weston, KWin, and Mutter compositing window managers;
for Windows: the Desktop Window Manager; and
for macOS: the Quartz Compositor.


== Contrast with stacking window managers ==
The window manager sends each window a message to repaint itself when needed. Windows may overlap. When a window in front is moved, it can reveal an area of a window behind that was previously concealed. Window managers are broadly categorised by their strategy for causing that newly revealed area to be displayed to the user. In the "stacking" strategy, the window manager tells the back window to repaint itself. In the "compositing" strategy, the window manager maintains an off-screen memory buffer containing the full appearance of each window, including the back window. 
With a stacking manager, the repainting process can become corrupted when a program that is slow, unresponsive or buggy does not respond to messages in a timely manner. A malicious program can cause the system to appear unstable by simply neglecting to repaint its window. Then, one or more of the following conditions may result:

a clipped window does not repaint uncovered regions, resulting in either blank spaces or a "trail" left behind from another window
portions of windows (such as decorative drop shadows) are left behind and not properly painted over
the mouse pointer is corrupted
the entire screen freezes until the program either responds or is terminated
With a compositing manager, if a window stops repainting itself when requested by the window manager, its last repaint will remain displayed and the window might be dimmed. Often, the title changes to reflect the status of the window as unresponsive. A program may prevent its window from being moved or unmapped, but generally will not cause repainting problems.


== History ==
One of the first systems with a compositing windowing system was the Commodore Amiga, released in 1985. Applications could first request a region of memory outside the current display region for use as bitmap. The Amiga windowing system would then use a series of bit blits using the system's hardware blitter to build a composite of these applications' bitmaps - along with buttons and sliders - in display memory, without requiring these applications to redraw any of their bitmaps.

On March 24, 2001, Mac OS X v10.0 became the first mainstream operating system to feature software-based 3D compositing and effects, provided by its Quartz component. With the release of Mac OS X v10.2 and Quartz Extreme, the job of compositing could move to dedicated graphics hardware.
In 2003 Sun Microsystems demonstrated an ambitious 3D graphics system called Project Looking Glass to layer on top of its Swing toolkit. It was first shown at the 2003 LinuxWorld Expo. Although Apple threatened to sue Sun for breach of intellectual-property rights, other window managers have implemented some of the functionality in Looking Glass. By 2006 development was discontinued by Sun, whose primary business was transitioning from graphically oriented Unix workstations to selling enterprise mainframes.
Microsoft first presented the Desktop Window Manager in Project Longhorn to the 2003 Windows Hardware Engineering Conference, demonstrating wobbly windows. Severe delays in the development of Longhorn caused Microsoft not to debut its 3D-compositing window-manager until the release of Windows Vista in January 2007.
Implementing compositing under the X Window System required some redesign, which took place incrementally. Metacity 2.8.4 was released in August 2004. However, the first widely publicized compositing window manager for X was Xfwm, released in January 2005. On 26 January 2005 Compiz was released, introducing fully accelerated 3D-compositing to the Linux platform.
KDE's KWin also supports compositing.


== Compositing and 3D effects in operating systems ==
In compositing, 3D effects could be applied on windows to provide 3D desktop effects. Modern compositing window managers use 3D hardware acceleration. Compositing window manager software communicates with graphics hardware via programming interfaces such as OpenGL or Direct3D.
The earliest widespread implementations using this technique were released for the Mac in Mac OS X 10.2, and for Linux in a Luminocity prototype. Currently, window managers using OpenGL include Compiz, KWin, and the Quartz Compositor, while Desktop Window Manager currently uses DirectX 9. OpenGL is still not fully supported in hardware, so performance of OpenGL-based compositing should continue to improve as hardware improves.


=== X11 and Wayland ===
Stacking window managers running on the X Window System (X11) required a chroma keying or green screening extension. Compositing was introduced by way of the Composite Extension. Compositing managers use hardware acceleration through this extension, if available.

Under X11, the ability to do full 3D-accelerated compositing required fundamental changes to the window system protocol in order to use hardware acceleration. Originally, a number of modified X11 implementations designed around OpenGL began to appear, including Xgl. The introduction of AIGLX would eliminate the need to use Xgl, and allow window managers to do 3D accelerated compositing on a standard X server, while still allowing for direct rendering. Currently, NVIDIA, Intel, and ATI cards support AIGLX.
Compiz introduced a cube effect, which allows the user to see up to 6 virtual desktops at once. Each desktop is converted into a surface texture of the cube, which can be rotated at will. Compiz displays a wide array of 2D and 3D effects and has relatively low hardware requirements. In 2012, Compiz was included in Ubuntu Linux, and was enabled automatically when supported hardware and drivers were available and the user had not selected 2D Mode.
Mutter (Metacity + Clutter) has replaced Metacity as the default window manager for GNOME. It is featured in the GNOME Shell component of GNOME 3.0. It uses the display engine Clutter, which has been ported to all major operating systems, netbooks and smartphones.
Since version 4, KDE's window manager KWin has compositing capabilities. KWin features much of the same functionality also present in Compiz.
With the Wayland protocol, a compositing window manager is also a display server; there is no display server separate from the window manager. The combined window manager/display server is called a Wayland compositor. Weston is a reference implementation of a Wayland compositor; KWin and Mutter are also Wayland compositors as well as being X11 compositing window managers.


=== Java ===

Project Looking Glass was a window manager combining 3D rendering and the cross-platform Java programming language. It is now inactive and released under the GNU General Public License. The Granular Linux live CD distribution includes Looking Glass as an optional window manager.
In the aftermath of it being discontinued, some of its features, such as cover switching and thumbnail live previews, have found their way onto other window managers. Its more original features included window tilting, two-sided window frames and parallax scrolling backgrounds.


=== AmigaOS 4 and MorphOS ===
While they are able to run on 3D-capable hardware, AmigaOS 4 and MorphOS are designed to run on old legacy Amiga computers, starting with the Amiga 1200. As such, their window managers have mostly planar rendering capabilities that include composite layering, alpha blending, gradients, high resolution and multiple desktops ("screens") that can partially clip one another.


=== Microsoft Windows ===
While the window manager in Windows 2000 does perform compositing, it does not perform transformations such as a per-pixel alpha. Few commercial applications took advantage of alpha blending; freeware programs were among the first to experiment with it, albeit through optional settings. Compositing was introduced with Desktop Window Manager in Windows Vista.
Windows Vista and Windows 7 allow the user to disable Desktop Window Manager by selecting the Windows Basic appearance settings. In addition, it is automatically disabled by Windows in order to perform hardware overlay through the Overlay Mixer Filter.


== Usability and eye candy ==
The compositing approach makes it easier to implement a number of features that make the user interface more accessible, simpler to use or with eye candy elements.


=== Magnifiers ===

Vector graphics, such as TrueType fonts and 3D-accelerated elements, can be expanded without degradation (usually due to aliasing). A screen magnifier enlarges an area of the screen, making portions of text easier to read – whether to prevent eye strain, for the visually impaired, or simply at a distance. Zoom effects such as the fish eye magnifier and zoom desktop effects provide this functionality.


=== Live preview ===
A preview of a window can be displayed in a pop-up thumbnail when the user hovers its associated taskbar button. This allows the user to identify and manage several concurrently running programs.


=== Window switching ===

Windows with similar names and icons tend to cause confusion, especially when their title bars overlap; the position of every such window on the taskbar has to be memorized. When there are many open windows in this manner, the user often has to resort to trial and error—clicking each taskbar button one-by-one—before proceeding. Window switching allows one to quickly preview several windows at once by temporarily rearranging them against a decorative background. After a selection is made, the windows are then restored to their original arrangement.
Selection begins when the user either enters a hotkey combination, moves the mouse pointer to a hotspot on the screen, or, in some situations, uses the mouse's scroll wheel. Items are navigated using the keyboard or mouse. An item is selected by either releasing the hotkey, hitting the Enter key or clicking on it with the mouse.


==== Flip switching ====

The flip switcher is an enhancement to the Alt-Tab switching feature. Running windows are arranged into a stack – similar to a flip-style selector in a 1950s jukebox, or a Rolodex. In some systems, the user can press Alt-Shift-Tab to navigate backwards. Visual transitions are applied to each item while navigating.
Common implementations of flip switching include Flip 3D in Windows and Shift Switcher in Compiz.


==== Cover switching ====

Cover switching is like flip switching with a few, mostly visual, differences. Instead of one stack with the selection at the top, two symmetrical stacks are shown with the current selection front and center (similar to the window tilting feature in Looking Glass).
Cover Flow is an implementation of cover switching in macOS. More recent versions use blurring to de-emphasize non-selected items. Cover Flow has also been implemented in other software published by Apple such as iTunes.
This is also referred to as "flick-book view."


==== Ring switching ====

Ring switching is like flip switching, except the windows move in a circle, with the current selection in front, usually at the bottom. Most compositing window managers include this feature out of the box, and third-party applications, such as 3d-desktop, are also available.


==== Grouping ====
The user can group windows together, such that only one window at a time is visible in each group. In Compiz, the window frame is flipped to indicate when the active window in its group has been changed.


==== Exposé ====

macOS displays a preview of every window on the screen by tiling them. Other systems with similar functionality (Microsoft Windows, Compiz, KWin, third-party applications) are referred to as Exposé clones. The hotkey to activate Exposé is not Alt-Tab, but rather F3.


==== Mission Control ====
Mac OS X 10.7 combines several other compositing features developed by Apple—such as Exposé, Dashboard, and Spaces—into a larger program called Mission Control.


=== Widget engines ===

On macOS, "widgets" (single-purpose applets) such as a clock, note pad, and calculator can appear by pressing a hotkey. Widget engines speed work by keeping commonly used widgets accessible while unobtrusive. They are handled by the Dashboard program in macOS.
Compiz starts with a blank Widget Layer, allowing the user to add applications by clicking on them. A variety of widgets are supported, including Screenlets, gDesklets and SuperKaramba.
Windows Vista provides gadgets that the user can place on the Windows Sidebar (Sidebar gadgets), a Windows Live start page (Web gadgets), or an external display, such as the user's mobile phone (SideShow gadgets). The Windows Sidebar was a visible partition in Windows Vista, and was eliminated in Windows 7, along with Sidebar gadgets which were changed to Desktop Gadgets.


=== Transitions and other effects ===
Before compositing window managers were developed, windows would instantly jump in and out of view, which is incongruent with the interface metaphor (and with a physical office setting). Some systems like the Classic Mac OS avoided this issue with ZoomRects, animating the windows outline "zooming" toward its final position. But on most systems, the sudden appearance and disappearance of GUI elements may seem confusing or even chaotic to inexperienced users. Visual transitions provide context and help distinguish the causal relationships of GUI elements. Instead of just disappearing, a window may fade away, or visibly shrink to the taskbar. A pull-down menu that has been clicked may smoothly radiate outward from the menu bar, making it easier to determine its origin and purpose.
Gradual and natural transitions may be especially helpful for elderly or visually impaired users who notice changes to the screen more slowly and with less clarity. For example, an inexperienced user may impulsively click on a menu that was activated by accident, causing him or her to lose work. The short delay necessary to display a visual transition may give the user enough time to make a conscious decision, and avoid such mistakes.


=== User interface façades ===
Metisse implements user interface façades, a system that provides users with simple ways to adapt, reconfigure, and recombine existing graphical interfaces, through the use of direct manipulation techniques.


== List of compositing window managers ==
3Dwm, a three-dimensional workspace manager and general-purpose platform for 3D user interfaces. As of June 2006 this project is inactive.
Desktop Window Manager and the Windows Aero theme on Windows
Quartz Compositor on macOS
Compiz
Marco
KWin (since version 3.3)
Mutter
Xfwm from within Xfce (since version 4.2)
Metisse
Mir (since version 1.0)


== List of standalone compositing managers ==
xcompmgr—a minimal alternative to Compiz
Compton–a bug-fixed fork of dcompmgr, which is a fork of xcompmgr. (Not maintained since 2017.)
Picom-a lightweight compositor for X11. It is a fork of Compton.
Cairo Compmgr (Cairo Composite Manager)—a compositing add-on for existing window managers. It uses Cairo, a vector graphics library also used in GTK+.
Unagi Compositing Manager—a compositing manager which can be used along with an existing window manager. It uses the XCB library. (Not maintained since 2014.)
MCompositor—used on MeeGo handsets.


== Operating systems with compositing window managers ==
Mac OS X 10.0 and later
any Unix-like OS using XOrg/AIGLX or Xgl
AmigaOS 4
MorphOS 2.0 and later
Windows Vista and later


== See also ==
Window manager
Tiling window manager
Stacking window manager
Re-parenting window manager
Retained mode
Zooming user interface
Computer graphics


== References ==


== External links ==
Various effects in Compiz on YouTube
Comparison between Windows Aero and Compiz on YouTube
Mac OS X and the Quartz Compositor on YouTube
Drop shadows and transparency in xcompmgr on YouTube
Desktop switching using 3d-desktop on YouTube
Desktop switching using the cube effect on YouTube
Official demonstration video for Project Looking Glass on YouTube
Background and windowing effects in Looking Glass on YouTube