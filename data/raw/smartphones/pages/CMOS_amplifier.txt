CMOS amplifiers (complementary metal–oxide–semiconductor amplifiers) are ubiquitous analog circuits used in computers, audio power amplifiers, smartphones, cameras, telecommunication systems, biomedical circuits, and many other systems. Their performance impacts the overall specifications of the systems. They take their name from the use of MOSFETs (metal–oxide–semiconductor field-effect transistors) as opposite to bipolar junction transistors (BJTs). MOSFETs are simpler to fabricate and therefore less expensive than BJT amplifiers, still providing a sufficiently high transconductance to allow the design of very high performance circuits. In high performance CMOS (complementary metal–oxide–semiconductor) amplifier circuits, transistors are not only used to amplify the signal but are also used as active loads to achieve higher gain and output swing in comparison with resistive loads.
CMOS technology was introduced primarily for digital circuit design. In the last few decades, to improve speed, power consumption, required area, and other aspects of digital integrated circuits (ICs), the feature size of MOSFET transistors has shrunk (minimum channel length of transistors reduces in newer CMOS technologies). This phenomenon predicted by Gordon Moore in 1975, which is called Moore’s law, and states that in about each 2 years, the number of transistors doubles for the same silicon area of ICs. Progress in memory circuits design is an interesting example to see how process advancement have affected the required size and their performance in the last decades. In 1956, a 5 MB hard disk drive (HDD) weighed over a ton, while these days having 50000 times more capacity with a weight of several tens of grams is very common.
While digital ICs have benefited from the feature size shrinking, analog CMOS amplifiers have not gained corresponding advantages due to the intrinsic limitations of an analog design—such as the intrinsic gain reduction of short-channel transistors, which affects the overall amplifier gain. Novel techniques that achieve higher gain also create new problems, like amplifier stability for closed-loop applications. The following addresses both aspects and summarizes different methods to overcome these problems.


== Intrinsic gain reduction in modern CMOS technologies ==
The maximum gain of a single MOSFET transistor is called intrinsic gain and is equal to

  
    
      
        A
        
          v
          
            int
          
        
        =
        
          g
          
            m
          
        
        
          r
          
            o
          
        
        ,
      
    
    {\displaystyle Av_{\text{int}}=g_{m}r_{o},}
  

where 
  
    
      
        
          g
          
            m
          
        
      
    
    {\displaystyle g_{m}}
  
 is the transconductance, and 
  
    
      
        
          r
          
            o
          
        
      
    
    {\displaystyle r_{o}}
  
 is the output resistance of transistor. As a first-order approximation, 
  
    
      
        
          r
          
            o
          
        
      
    
    {\displaystyle r_{o}}
  
 is directly proportional to the channel length of transistors. In a single-stage amplifier, one can increase channel length to get higher output resistance and gain as well, but this also increases the parasitic capacitance of transistors, which limits the amplifier bandwidth. The transistor channel length is smaller in modern CMOS technologies, which makes achieving high gain in single-stage amplifiers very challenging. To achieve high gain, the literature has suggested many techniques. The following sections look at different amplifier topologies and their features.


== Single-stage amplifiers ==
Telescopic, folded cascode (FC), or recycling FC (RFC) are the most common single-stage amplifiers. All these structures use transistors as active loads to provide higher output resistance (= higher gain) and output swing. A telescopic amplifier provides higher gain (due to higher output resistance) and higher bandwidth (due to smaller non-dominant pole at the cascode node). In contrast, it has limited output swing and difficulty in implementation of unity-gain buffer. Although FC has lower gain and bandwidth, it can provide a higher output swing, an important advantage in modern CMOS technologies with reduced supply voltage. Also, since the DC voltage of input and output nodes can be the same, it is more suitable for implementation of unity-gain buffer. FC is recently used to implement integrator in a bio-nano sensor application. Also, it can be used as a stage in multi-stage amplifiers. As an example, FC is used as the input stage of a two-stage amplifier in designing of a potentiostat circuit, which is to measure neuronal activities, or DNA sensing. Also, it can be used to realize transimpedance amplifier (TIA). TIA can be used in amperometric biosensors to measure current of cells or solutions to define the characteristics of a device under test 
In the last decade, circuit designers have proposed different modified versions of FC circuit. RFC is one of the modified versions of FC amplifier, which provides higher gain, higher bandwidth, and also higher slew rate in comparison with FC (for the same power consumption). Recently, RFC amplifier has used in hybrid CMOS–graphene sensor array for subsecond measurement of dopamine. It is used as a low-noise amplifier to implement integrator.


=== Stability ===

In many applications, an amplifier drives a capacitor as a load. In some applications, like switched capacitor circuits, the value of capacitive load changes in different cycles. Therefore, it affects output node time constant and amplifier frequency response. Stable behavior of amplifier for all possible capacitive loads is necessary, and designer must consider this issue during designing of circuit. Designer should ensure that phase margin (PM) of the circuit is enough for the worst case. To have proper circuit behavior and time response, designers usually consider a PM of 60 degrees. For higher PM values, the circuit is more stable, but it takes longer for the output voltage to reach its final value. In telescopic and FC amplifiers, the dominant pole is at the output nodes. Also, there is a non-dominant pole at the cascode node. Since capacitive load connected to output nodes, its value affects the location of the dominant pole. This figure shows how capacitive load affects the location of dominant pole 
  
    
      
        (
        
          ω
          
            1
          
        
        )
      
    
    {\textstyle (\omega _{1})}
  
 and stability. Increasing capacitive load moves the dominant pole toward the origin, and since unity gain frequency 
  
    
      
        (
        
          ω
          
            unity
          
        
        )
      
    
    {\displaystyle (\omega _{\text{unity}})}
  
 is 
  
    
      
        
          A
          
            v
          
        
      
    
    {\displaystyle A_{v}}
  
 (amplifier gain) times 
  
    
      
        
          ω
          
            1
          
        
        ,
      
    
    {\textstyle \omega _{1},}
  
 it also moves toward the origin. Therefore, PM increases, which improves stability. So, if we ensure stability of a circuit for a minimum capacitive load, it remains stable for larger load values. To achieve greater than 60 degrees PM, the non-dominant pole 
  
    
      
        (
        
          ω
          
            2
          
        
        )
      
    
    {\textstyle (\omega _{2})}
  
 must be greater than 
  
    
      
        1.7
        
        
          ω
          
            unity
          
        
        .
      
    
    {\displaystyle 1.7\,\omega _{\text{unity}}.}
  


== Multi-stage amplifiers ==
In some applications, like switched capacitor filters or integrators, and different types of analog-to-digital converters, having high gain (70-80 dB) is needed, and achieving the required gain sometimes is impossible with single-stage amplifiers. This is more serious in modern CMOS technologies, which transistors have smaller output resistance due to shorter channel length. To achieve high gain as well as high output swing, multi-stage amplifiers have been invented. To implement two-stage amplifier, one can use FC amplifier as the first stage and a common source amplifier as the second stage. Also, to implement four-stage amplifier, 3 common source amplifier can be cascaded with FC amplifier. It should be mentioned that to drive large capacitive loads or small resistive loads, the output stage should be class AB. For example, common source amplifier with class AB behavior can be used as the final stage in three-stage amplifier to not only improve drive capability, but also gain. Class AB amplifier can be used as a column driver in LCDs.


=== Stability in two-stage amplifiers ===
Unlike single-stage amplifiers, multi-stage amplifiers usually have 3 or more poles and if they are used in feedback networks, the closed loop system is probably unstable. To have stable behavior in multi-stage amplifiers, it is necessary to use compensation network. The main goal of compensation network is to modify transfer function of the system in such a way to achieve enough PM. So, by the use of compensation network, we should get frequency response similar to what we showed for single-stage amplifiers. In single-stage amplifiers, capacitive load is connected to the output node, which dominant pole happens there, and increasing its value improves PM. So, it acts like a compensation capacitor (network). To compensate multi-stage amplifiers, compensation capacitor is usually used to move dominant pole to lower frequency to achieve enough PM.   

The following figure shows the block diagram of a two-stage amplifier in fully differential and single ended modes. In a two-stage amplifier, input stage can be a Telescopic or FC amplifier. For the second stage, common source amplifier with active load is a common choice. Since output resistance of the first stage is much greater than the second stage, dominant pole is at the output of the first stage. 
Without compensation, the amplifier is unstable, or at least does not have enough PM. The load capacitance is connected to the output of the second stage, which non-dominant pole happens there. Therefore, unlike single-stage amplifiers, increasing of capacitive load, moves the non-dominant pole to lower frequency and deteriorates PM. Mesri et al. suggested two-stage amplifiers that behave like single-stage amplifiers, and amplifiers remains stable for larger values of capacitive loads.
To have proper behavior, we need to compensate two-stage or multi-stage amplifiers. The simplest way for compensation of two-stage amplifier, as shown in the left block diagram of the below figure, is to connect compensation capacitor at the output of the first stage, and move dominant pole to lower frequencies. But, realization of capacitor on silicon chip requires considerable area. The most common compensation method in two-stage amplifiers is Miller compensation (middle block diagram in the below figure. In this method, a compensation capacitor is placed between input and output node of the second stage. In this case, the compensation capacitor appears 
  
    
      
        1
        +
        
          |
        
        
          A
          
            v
            2
          
        
        
          |
        
      
    
    {\displaystyle 1+|A_{v2}|}
  
 times greater at the output of the first stage, and pushes the dominant pole as well as unity gain frequency to lower frequencies. Moreover, because of pole splitting effect, it also moves the non-dominant pole to higher frequencies. Therefore, it is a good candidate to make the amplifier stable. The main advantage of Miller compensation method, is to reduce size of the required compensation capacitor by a factor of 
  
    
      
        1
        +
        
          |
        
        
          A
          
            v
            2
          
        
        
          |
        
        .
      
    
    {\displaystyle 1+|A_{v2}|.}
  
 The issue raised from Miller compensation capacitor is introducing right-half plane (RHP) zero, which reduces PM. Hopefully, different methods have suggested to solve this issue. As an example, to cancel the effect of RHP zero, nulling resistor can be used in series with compensation capacitor (right block diagram of the below figure). Based on the resistor value, we can push RHP zero to higher frequency (to cancel its effect on PM), or to move it LHP (to improve PM), or even remove the first non-dominant pole to improve Bandwidth and PM. This method of compensation is recently used in amplifier design for potentiostat circuit. Because of process variation, resistor value can change more than 10%, and therefore affects stability. Using current buffer or voltage buffer in series with compensation capacitor is another option to get better results.


== See also ==
FET amplifier
List of MOSFET applications


== References ==