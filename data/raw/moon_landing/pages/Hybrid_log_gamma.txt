The hybrid log–gamma (HLG) transfer function is a transfer function jointly developed by the BBC and NHK for high dynamic range (HDR) display. It is backward compatible with the transfer function of SDR (the gamma curve). It was approved as ARIB STD-B67 by the Association of Radio Industries and Businesses (ARIB). It is also defined in ATSC 3.0, Digital Video Broadcasting (DVB) UHD-1 Phase 2, and International Telecommunication Union (ITU) Rec. 2100.

HLG is an HDR format that uses the HLG transfer function, BT.2020 color primaries and a bitdepth of 10-bit. HLG was designed to be backward compatible with SDR UHDTV. However, HLG is not intended to be fully backward compatible with traditional SDR displays that cannot interpret BT.2020 colorimetry.
Both HLG transfer function and the HLG format are royalty-free. The backward compatibility allows them to be used with existing transmission standards when the receiver is compatible with the BT.2020 colour container, reducing complexity and cost for both equipment manufacturers and content distributors. They are supported by HDMI 2.0b, HEVC, VP9, and H.264/MPEG-4 AVC,  and are used by video services such as BBC iPlayer, DirecTV, Freeview Play, and YouTube.


== Description ==
HLG is designed to be better-suited for television broadcasting, where the metadata required for other HDR formats is not backward compatible with non-HDR displays, consumes additional bandwidth, and may also become out-of-sync or damaged in transmission. HLG defines a non-linear optical-electro transfer function, in which the lower half of the signal values use a gamma curve and the upper half of the signal values use a logarithmic curve. In practice, the signal is interpreted as normal by standard-dynamic-range displays (albeit capable of displaying more detail in highlights), but HLG-compatible displays can correctly interpret the logarithmic portion of the signal curve to provide a wider dynamic range. In contrast with the other HDR formats it does not use metadata.
The HLG transfer function is backward compatible with SDR's gamma curve. However, HLG is commonly used with Rec. 2020 color primaries which produce a de-saturated image with visible hue shifts on non-compatible devices. HLG is therefore backward compatible with SDR-UHDTV and will show color distortion on common SDR devices that only support Rec. 709 color primaries.


== Technical details ==
HLG defines a nonlinear transfer function in which the lower half of the signal values use a gamma curve and the upper half of the signal values use a logarithmic curve.
HLG reference OETF is as follows (as defined in ARIB STD-B67):

  
    
      
        
          E
          ′
        
        =
        
          
            {
            
              
                
                  r
                  
                  
                    
                      E
                    
                  
                   
                
                
                  0
                  ≤
                  E
                  ≤
                  1
                  ,
                  
                
              
              
                
                  a
                  ln
                  ⁡
                  (
                  E
                  −
                  b
                  )
                  +
                  c
                
                
                  1
                  <
                  E
                
              
            
            
          
        
      
    
    {\displaystyle E'={\begin{cases}r\,{\sqrt {E}}\ &0\leq E\leq 1,\!\\a\ln(E-b)+c&1<E\end{cases}}}
  

or as follows (as defined in Rec. 2100):

  
    
      
        
          E
          ′
        
        =
        
          
            {
            
              
                
                  
                    
                      3
                      E
                    
                  
                   
                
                
                  0
                  ≤
                  E
                  ≤
                  
                    
                      1
                      12
                    
                  
                  ,
                  
                
              
              
                
                  a
                  ln
                  ⁡
                  (
                  12
                  E
                  −
                  b
                  )
                  +
                  c
                
                
                  
                    
                      1
                      12
                    
                  
                  <
                  E
                  ≤
                  1
                
              
            
            
          
        
      
    
    {\displaystyle E'={\begin{cases}{\sqrt {3E}}\ &0\leq E\leq {\frac {1}{12}},\!\\a\ln(12E-b)+c&{\frac {1}{12}}<E\leq 1\end{cases}}}
  

where

E is the linear light signal normalized by the reference white level in the range 
  
    
      
        
          [
          
            0
            ,
            12
          
          ]
        
      
    
    {\displaystyle \left[0,12\right]}
  
 in ARIB STD-B67 and in the range 
  
    
      
        
          [
          
            0
            ,
            1
          
          ]
        
      
    
    {\displaystyle \left[0,1\right]}
  
 in Rec. 2100.
E'  is the resulting nonlinear signal
r is the reference white level and has a signal value of 0.5
and the constants a, b, and c are defined as a = 0.17883277, b = 1 - 4a = 0.28466892, and c = 0.5 - a ln(4a) = 0.55991073
The signal value is 0.5 for the reference white level while the signal value for 1 has a relative luminance that is 12 times higher than the reference white level. ARIB STD-B67 has a nominal range of 0 to 12. HLG uses a logarithmic curve for the upper half of the signal values due to Weber's law.
HLG reference OOTF is as follows:

  
    
      
        
          
            {
            
              
                
                  
                    F
                    
                      D
                    
                  
                  =
                  O
                  O
                  T
                  F
                  [
                  E
                  ]
                  =
                  α
                  
                    Y
                    
                      S
                    
                    
                      γ
                      −
                      1
                    
                  
                  E
                  
                
              
              
                
                  
                    R
                    
                      D
                    
                  
                  =
                  α
                  
                    Y
                    
                      S
                    
                    
                      γ
                      −
                      1
                    
                  
                  
                    R
                    
                      S
                    
                  
                  
                
              
              
                
                  
                    G
                    
                      D
                    
                  
                  =
                  α
                  
                    Y
                    
                      S
                    
                    
                      γ
                      −
                      1
                    
                  
                  
                    G
                    
                      S
                    
                  
                  
                
              
              
                
                  
                    B
                    
                      D
                    
                  
                  =
                  α
                  
                    Y
                    
                      S
                    
                    
                      γ
                      −
                      1
                    
                  
                  
                    B
                    
                      S
                    
                  
                  
                
              
              
                
                  
                    Y
                    
                      S
                    
                  
                  =
                  0.2627
                  
                    R
                    
                      S
                    
                  
                  +
                  0.6780
                  
                    G
                    
                      S
                    
                  
                  +
                  0.0593
                  
                    B
                    
                      S
                    
                  
                
              
            
            
          
        
      
    
    {\displaystyle {\begin{cases}F_{D}=OOTF[E]=\alpha Y_{S}^{\gamma -1}E\!\\R_{D}=\alpha Y_{S}^{\gamma -1}R_{S}\!\\G_{D}=\alpha Y_{S}^{\gamma -1}G_{S}\!\\B_{D}=\alpha Y_{S}^{\gamma -1}B_{S}\!\\Y_{S}=0.2627R_{S}+0.6780G_{S}+0.0593B_{S}\end{cases}}}
  
where

  
    
      
        
          F
          
            D
          
        
      
    
    {\displaystyle F_{D}}
  
 is the luminance of a displayed linear component 
  
    
      
        
          R
          
            D
          
        
        ,
        
          G
          
            D
          
        
        ,
        
          B
          
            D
          
        
      
    
    {\displaystyle R_{D},G_{D},B_{D}}
  
 in cd/m2.

  
    
      
        E
      
    
    {\displaystyle E}
  
 is a signal for each colour component {Rs, Gs, Bs} proportional to scene linear light normalized to the range 
  
    
      
        
          [
          
            0
            ,
            1
          
          ]
        
      
    
    {\displaystyle \left[0,1\right]}
  
.

  
    
      
        
          Y
          
            S
          
        
      
    
    {\displaystyle Y_{S}}
  
 is the normalized linear scene luminance.

  
    
      
        α
      
    
    {\displaystyle \alpha }
  
 is the variable for user gain in cd/m2. It represents LW, the nominal peak luminance of a display for achromatic pixels.

  
    
      
        γ
      
    
    {\displaystyle \gamma }
  
 is the system gamma. 
  
    
      
        γ
      
    
    {\displaystyle \gamma }
  
 = 1.2 at the nominal display peak luminance of 1000 cd/m2.
HLG reference EOTF is as follows:

  
    
      
        
          F
          
            D
          
        
        =
        O
        O
        T
        F
        [
        O
        E
        T
        
          F
          
            −
            1
          
        
        [
        m
        a
        x
        (
        0
        ,
        (
        1
        −
        β
        )
        
          E
          ′
        
        +
        β
        )
        ]
        ]
      
    
    {\displaystyle F_{D}=OOTF[OETF^{-1}[max(0,(1-\beta )E'+\beta )]]}
  

where

  
    
      
        
          F
          
            D
          
        
      
    
    {\displaystyle F_{D}}
  
 is the luminance of a displayed linear component 
  
    
      
        
          R
          
            D
          
        
        ,
        
          G
          
            D
          
        
        ,
        
          B
          
            D
          
        
      
    
    {\displaystyle R_{D},G_{D},B_{D}}
  
 in cd/m2.

  
    
      
        
          E
          ′
        
      
    
    {\displaystyle E'}
  
 is the non-linear electrical signal 
  
    
      
        
          R
          ′
        
        ,
        
          G
          ′
        
        ,
        
          B
          ′
        
      
    
    {\displaystyle R',G',B'}
  
 in the range 
  
    
      
        
          [
          
            0
            ,
            1
          
          ]
        
      
    
    {\displaystyle \left[0,1\right]}
  
.

  
    
      
        β
        =
        
          
            3
            (
            
              L
              
                B
              
            
            
              /
            
            
              L
              
                W
              
            
            
              )
              
                1
                
                  /
                
                γ
              
            
          
        
      
    
    {\displaystyle \beta ={\sqrt {3(L_{B}/L_{W})^{1/\gamma }}}}
  
 is the variable for user black level lift.

  
    
      
        
          L
          
            W
          
        
      
    
    {\displaystyle L_{W}}
  
 is nominal peak luminance of the display in cd/m2 for achromatic pixels.

  
    
      
        
          L
          
            B
          
        
      
    
    {\displaystyle L_{B}}
  
 is the display luminance for black in cd/m2.
HLG does not need to use metadata since it is compatible with both SDR displays and HDR displays. HLG can be used with displays of different brightness in a wide range of viewing environments.
The dynamic range that can be perceived by the human eye in a single image is around 14 stops. An SDR video display with a 2.4 gamma curve and a bit depth of 8-bits per sample can display a range of about 6 stops without visible banding. Professional SDR video displays with a bit depth of 10-bits per sample extend that range to about 10 stops. When HLG is displayed on a 2,000 cd/m2 display with a bit depth of 10-bits per sample it can display a range of 200,000:1 or 17.6 stops without visible banding.
HLG increases the dynamic range of the video compared to a conventional gamma curve by using a logarithmic curve for the upper half of the signal values. HLG also increases the dynamic range by not including the linear part of the conventional gamma curve used by Rec. 601 and Rec. 709. The linear part of the conventional gamma curve was used to limit camera noise in low light video but is no longer needed with HDR cameras.
HLG is supported in Rec. 2100 with a nominal peak luminance of 1,000 cd/m2 and a system gamma value that can be adjusted depending on background luminance.
HLG is supported in HEVC with a formula that is mathematically equivalent to ARIB STD-B67 but has a nominal range of 0 to 1 instead of 0 to 12:

  
    
      
        V
        =
        
          
            {
            
              
                
                  
                    
                      3
                    
                  
                  ⋅
                  
                    L
                    
                      c
                    
                    
                      0.5
                    
                  
                
                
                  
                    
                      1
                      12
                    
                  
                  ≥
                  
                    L
                    
                      c
                    
                  
                  ≥
                  0
                  ,
                  
                
              
              
                
                  a
                  ⋅
                  ln
                  ⁡
                  (
                  12
                  
                    L
                    
                      c
                    
                  
                  −
                  b
                  )
                  +
                  c
                
                
                  1
                  ≥
                  
                    L
                    
                      c
                    
                  
                  >
                  
                    
                      1
                      12
                    
                  
                
              
            
            
          
        
      
    
    {\displaystyle V={\begin{cases}{\sqrt {3}}\cdot L_{c}^{0.5}&{\frac {1}{12}}\geq L_{c}\geq 0,\!\\a\cdot \ln(12L_{c}-b)+c&1\geq L_{c}>{\frac {1}{12}}\end{cases}}}
  

where

Lc has a nominal range of 0 to 1 and V is the resulting nonlinear signal
the constants a, b, and c are defined as a = 0.17883277, b = 1 - 4a = 0.28466892, and c = 0.5 - a ln(4a) = 0.55991073


== History ==


=== Inception ===
On May 15, 2015, the BBC announced that they had begun work with the NHK to develop a joint HDR proposal that would be proposed to the International Telecommunication Union (ITU). On June 9, 2015, HLG was proposed to the JCT-VC for High Efficiency Video Coding (HEVC) and added to the June 2015 draft of the screen content coding extensions.
Later that year, Sony showed HLG video on a modified HDR display at the SMPTE 2015 conference. Colorfront announced that their Transkoder 2016 software would support HDR output using HLG. LG announced that their 2015 4K OLED TVs would support HDR from HLG and perceptual quantizer (PQ). Blackmagic Design released an update for DaVinci Resolve that added support for HLG.
SKY PerfecTV! announced that they will use HLG to transmit 4K UHDTV HDR programming to their satellite subscribers in Japan. Harmonic Inc. and NASA announced the HDR capture of an Atlas V launch which was broadcast the next day on NASA TV using HLG. Vatican Television Center broadcast the ceremony of the Holy Door using HLG and the Rec. 2020 color space.


=== 2016 ===
Industry bodies:

The Ultra HD Forum announced their guidelines for UHD Phase A which includes support for HLG. The Ultra HD Forum also defined HLG with a bit depth of 10-bits, and the Rec. 2020 color space.
The ITU announced Rec. 2100 which defines two HDR transfer functions which are HLG and PQ.
Digital UK published their 2017 specification for Freeview Play which includes support for HDR using HLG.
The Digital Video Broadcasting (DVB) Steering Board approved UHD-1 Phase 2 with an HDR solution that supports HLG and PQ. The specification has been published as DVB Bluebook A157 and will be published by the ETSI as TS 101 154 v2.3.1.
HDMI announced that HLG support had been added to the HDMI 2.0b standard.
Hardware:

Leader Electronics Corporation announced their 12G-SDI waveform monitors with support for HLG.
Harmonic Inc. released an update for the ViBE 4K UHD encoder that added support for HLG.
Canon Inc. announced that they will release firmware updates for the DP-V2410 and DP-V3010 reference displays to add support for HLG.
Sony announced the PVM-X550 OLED monitor with support for HLG. Sony also announced a firmware update for the BVM-X300 OLED monitor to add support for HLG.
Sony announced that in October they would release a firmware update to add HLG to their BVM-X300 OLED monitor.
Sony announced that their VPL-VW675ES projector would support HLG.
The Trusted Reviews website reported that Samsung had told them that all of their 2016 HDR TVs could support HLG with a firmware update.
Atomos updated their Shogun Inferno product to include HLG input and output for recording, monitoring, editing and layout from cameras and computers as well as to HLG compatible TVs.
Software:

Avid Technology released an update for Media Composer that added support for HLG.
Google announced Android TV 7.0 which supports HLG.
Broadcasters:

Dome Productions announced that they will begin trials of HLG to deliver HDR content.
SKY Perfect JSAT Group announced that on October 4 they will start the world's first 4K HDR broadcasts using HLG.
Eutelsat announced that it will launch a new channel using HLG.
Google announced that YouTube will start streaming HDR videos which can be encoded with HLG or PQ.
The BBC announced that it was adding a 4-minute HLG edit from their Planet Earth II series to its BBC iPlayer IPTV platform for public UHD testing.
Mediapro/Overon announced that they will transmit the Spanish Football League (LFP) worldwide using 4K HDR broadcasts based in HLG


=== 2017 ===
Industry bodies:

ATSC released the video standard for ATSC 3.0 which includes support for HLG.
Hardware:

LG Corporation announced that their 2017 Super UHD TVs will support HLG.
Panasonic announced that their 2017 OLED TV will support HLG.
Sony announced that their 2017 OLED TVs will support HLG.
JVC announced that their 2017 4K projectors will support HLG.
LG Corporation announced that they will add support for HLG to their 2016 OLED TVs and their 2016 Super UHD TVs with a firmware update.
Sony announced that they will add support for HLG to their 2017 4K TVs with a firmware update.
Panasonic announced that they will add support for HLG to several models of their 2016 4K TVs with a firmware update.
Philips announced that their 2017 4K TVs will support HLG and that they will add support for HLG to several models of their 2016 4K TVs with a firmware update.
Sony began releasing firmware updates for several of their 2016 and 2017 Android TV models which adds support for HLG.
Panasonic released firmware update 2.0 for the Panasonic Lumix DC-GH5 which added support for HLG recording.
Panasonic began releasing firmware updates for several of their 2016 TV models which adds support for HLG.
Qualcomm announced the Qualcomm Snapdragon 845 which includes support for HLG.
Software:

Adobe Systems announced updates to Adobe Creative Cloud which includes support for HLG.
Apple released an update for Final Cut Pro X which includes support for HLG.
Broadcasters:

Eutelsat announced that their Hot Bird video service would include the Travelxp 4K channel which uses HLG.
The BBC announced that Blue Planet II would be available in 4K HDR on the BBC iPlayer using HLG. Blue Planet II will be available on the BBC iPlayer service from December 10, 2017 to January 16, 2018. The BBC states that almost 400 TV models have support for HLG which includes TV models from Finlux, Hisense, Hitachi, LG, Panasonic, Philips, Samsung, Sony, and Toshiba.
DirecTV began broadcasting HLG HDR on their 4K Channels 104 and 106.


=== 2018 ===
Vizio announced HLG support for their 2018 models.


=== 2019 ===
Panasonic announced HLG support in their S1 and S1R full frame mirrorless cameras which will be released in March 2019.


=== 2020 ===
Sky UK announced that their popular Sky Q box will get HLG support from May 27, 2020.
Apple released the iPhone 12 series with HLG video recording support via Dolby Vision profile 8.4, which adds a Dolby Vision metadata layer on top of HLG footage.


== See also ==
Dynamic range
Gamma correction
High-dynamic-range rendering
High-dynamic-range imaging
High-dynamic-range video


== References ==


== External links ==
ARIB STD-B67
T. Borer and A. Cotton, A "Display Independent" High Dynamic Range Television System, BBC Research & Development White Paper WHP 309, September 2015