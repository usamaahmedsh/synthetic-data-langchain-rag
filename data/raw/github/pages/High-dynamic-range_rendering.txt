High-dynamic-range rendering (HDRR or HDR rendering), also known as high-dynamic-range lighting, is the rendering of computer graphics scenes by using lighting calculations done in high dynamic range (HDR). This allows preservation of details that may be lost due to limiting contrast ratios. Video games and computer-generated imagery movies and visual effects benefit from this as it creates more realistic scenes than with more simplistic lighting models. HDRR was originally required to tone map the rendered image onto Standard Dynamic Range (SDR) displays, as the first HDR capable displays did not arrive until the 2010s. However, if a modern HDR display is available, it is possible to instead display the HDRR with even greater contrast and realism.
Graphics processor company Nvidia summarizes the motivation for HDRR in three points: bright things can be really bright, dark things can be really dark, and details can be seen in both.


== History ==
The use of high-dynamic-range imaging (HDRI) in computer graphics was introduced by Greg Ward in 1985 with his open-source Radiance rendering and lighting simulation software which created the first file format to retain a high-dynamic-range image. HDRI languished for more than a decade, held back by limited computing power, storage, and capture methods. Not until recently has the technology to put HDRI into practical use been developed.
In 1990, Eihachiro Nakame and associates presented a lighting model for driving simulators that highlighted the need for high-dynamic-range processing in realistic simulations.
In 1995, Greg Spencer presented Physically-based glow visual effects for digital images at SIGGRAPH, providing a quantitative model for flare and blooming in the human eye.
In 1997, Paul Debevec presented Recovering high dynamic range radiance maps from photographs at SIGGRAPH, and the following year presented Rendering synthetic objects into real scenes. These two papers laid the framework for creating HDR light probes of a location, and then using this probe to light a rendered scene.
HDRI and HDRL (high-dynamic-range image-based lighting) have, ever since, been used in many situations in 3D scenes in which inserting a 3D object into a real environment requires the light probe data to provide realistic lighting solutions.
In gaming applications, Riven: The Sequel to Myst in 1997 used an HDRI postprocessing shader directly based on Spencer's paper. After E3 2003, Valve released a demo movie of their Source engine rendering a cityscape in a high dynamic range. The term was not commonly used again until E3 2004, where it gained much more attention when Epic Games showcased Unreal Engine 3 and Valve announced Half-Life 2: Lost Coast in 2005, coupled with open-source engines such as OGRE 3D and open-source games like Nexuiz.
By the 2010s, HDR displays first became available. With higher contrast ratios, HDRR can reduce or eliminate tone mapping, resulting in an even more realistic image.


== Examples ==
One of the primary advantages of HDR rendering is that details in a scene with a large contrast ratio are preserved. Without HDRR, areas that are too dark are clipped to black and areas that are too bright are clipped to white. These are represented by the hardware as a floating point value of 0.0 and 1.0 for pure black and pure white, respectively.
Another aspect of HDR rendering is the addition of perceptual cues which increase apparent brightness.  HDR rendering also affects how light is preserved in optical phenomena such as reflections and refractions, as well as transparent materials such as glass. In LDR rendering, very bright light sources in a scene (such as the sun) are capped at 1.0. When this light is reflected the result must then be less than or equal to 1.0. However, in HDR rendering, very bright light sources can exceed the 1.0 brightness to simulate their actual values. This allows reflections off surfaces to maintain realistic brightness for bright light sources.


== Limitations and compensations ==


=== Human eye ===
The human eye can perceive scenes with a very high dynamic contrast ratio, around 1,000,000:1. Adaptation is achieved in part through adjustments of the iris and slow chemical changes, which take some time (e.g. the delay in being able to see when switching from bright lighting to pitch darkness). At any given time, the eye's static range is smaller, around 10,000:1. However, this is still higher than the static range of most display technology.


=== Output to displays ===
Although many manufacturers claim very high numbers, plasma displays, liquid-crystal displays, and CRT displays can deliver only a fraction of the contrast ratio found in the real world, and these are usually measured under ideal conditions. The simultaneous contrast of real content under normal viewing conditions is significantly lower.
Some increase in dynamic range in LCD monitors can be achieved by automatically reducing the backlight for dark scenes.  For example, LG calls this technology "Digital Fine Contrast"; Samsung describes it as "dynamic contrast ratio".  Another technique is to have an array of brighter and darker LED backlights, for example with systems developed by BrightSide Technologies.
OLED displays have better dynamic range capabilities than LCDs, similar to plasma but with lower power consumption. Rec. 709 defines the color space for HDTV, and Rec. 2020 defines a larger but still incomplete color space for ultra-high-definition television.
Since the 2010s, OLED and other HDR display technologies have reduced or eliminated the need for tone mapping HDRR to standard dynamic range.


=== Light bloom ===

Light blooming is the result of scattering in the human lens, which human brain interprets as a bright spot in a scene. For example, a bright light in the background will appear to bleed over onto objects in the foreground. This can be used to create an illusion to make the bright spot appear to be brighter than it really is.


=== Flare ===

Flare is the diffraction of light in the human lens, resulting in "rays" of light emanating from small light sources, and can also result in some chromatic effects.  It is most visible on point light sources because of their small visual angle.
Typical display devices cannot display light as bright as the Sun, and ambient room lighting prevents them from displaying true black.  Thus, HDR rendering systems have to map the full dynamic range of what the eye would see in the rendered situation onto the capabilities of the device.  This tone mapping is done relative to what the virtual scene camera sees, combined with several full screen effects, e.g. to simulate dust in the air which is lit by direct sunlight in a dark cavern, or the scattering in the eye.
Tone mapping and blooming shaders can be used together to help simulate these effects.


=== Tone mapping ===

Tone mapping, in the context of graphics rendering, is a technique used to map colors from high dynamic range (in which lighting calculations are performed) to a lower dynamic range that matches the capabilities of the desired display device. Typically, the mapping is non-linear – it preserves enough range for dark colors and gradually limits the dynamic range for bright colors. This technique often produces visually appealing images with good overall detail and contrast. Various tone mapping operators exist, ranging from simple real-time methods used in computer games to more sophisticated techniques that attempt to imitate the perceptual response of the human visual system.
HDR displays with higher dynamic range capabilities can reduce or eliminate the tone mapping required after HDRR, resulting in an even more realistic image.


== Applications in computer entertainment ==
Currently HDRR has been prevalent in games, primarily for PCs, Microsoft's Xbox 360, and Sony's PlayStation 3. It has also been simulated on the PlayStation 2, GameCube, Xbox and Amiga systems. Sproing Interactive Media has announced that their new Athena game engine for the Wii will support HDRR, adding Wii to the list of systems that support it.
In desktop publishing and gaming, color values are often processed several times over. As this includes multiplication and division (which can accumulate rounding errors), it is useful to have the extended accuracy and range of 16-bit integer or 16-bit floating point formats. This is useful irrespective of the aforementioned limitations in some hardware.


=== Development of HDRR through DirectX ===
Complex shader effects began their days with the release of Shader Model 1.0 with DirectX 8. Shader Model 1.0 illuminated 3D worlds with what is called standard lighting. Standard lighting, however, had two problems:

Lighting precision was confined to 8-bit integers, which limited the contrast ratio to 256:1. Using the HVS color model, the value (V), or brightness of a color, has a range of 0 – 255. This means the brightest white (a value of 255) is only 255 levels brighter than the darkest shade above pure black (i.e.: value of 0).
Lighting calculations were integer based, which didn't offer as much accuracy because the real world is not confined to whole numbers.
On December 24, 2002, Microsoft released a new version of DirectX. DirectX 9.0 introduced Shader Model 2.0, which offered one of the necessary components to enable rendering of high-dynamic-range images: lighting precision was not limited to just 8-bits. Although 8-bits was the minimum in applications, programmers could choose up to a maximum of 24 bits for lighting precision. However, all calculations were still integer-based. One of the first graphics cards to support DirectX 9.0 natively was ATI's Radeon 9700, though the effect wasn't programmed into games for years afterwards. On August 23, 2003, Microsoft updated DirectX to DirectX 9.0b, which enabled the Pixel Shader 2.x (Extended) profile for ATI's Radeon X series and NVIDIA's GeForce FX series of graphics processing units.
On August 9, 2004, Microsoft updated DirectX once more to DirectX 9.0c. This also exposed the Shader Model 3.0 profile for High-Level Shader Language (HLSL). Shader Model 3.0's lighting precision has a minimum of 32 bits as opposed to 2.0's 8-bit minimum. Also all lighting-precision calculations are now floating-point based. NVIDIA states that contrast ratios using Shader Model 3.0 can be as high as 65535:1 using 32-bit lighting precision. At first, HDRR was only possible on video cards capable of Shader-Model-3.0 effects, but software developers soon added compatibility for Shader Model 2.0. As a side note, when referred to as Shader Model 3.0 HDR, HDRR is really done by FP16 blending. FP16 blending is not part of Shader Model 3.0, but is supported mostly by cards also capable of Shader Model 3.0 (exceptions include the GeForce 6200 series). FP16 blending can be used as a faster way to render HDR in video games.
Shader Model 4.0 is a feature of DirectX 10, which was released with Windows Vista. Shader Model 4.0 allows 128-bit HDR rendering, as opposed to 64-bit HDR in Shader Model 3.0 (although this is theoretically possible under Shader Model 3.0).
Shader Model 5.0 is a feature of DirectX 11. It allows 6:1 compression of HDR textures without noticeable loss, which is prevalent in previous versions of DirectX HDR texture compression techniques.


=== Development of HDRR through OpenGL ===
It is possible to develop HDRR through GLSL shader starting from OpenGL 1.4 onwards.


=== Game engines that support HDR rendering ===
Unreal Engine 5
Unreal Engine 4
Unreal Engine 3
Chrome Engine 3
Source
Source 2
Serious Engine 2
MT Framework 2
RE Engine
REDengine 3
CryEngine, CryEngine 2, CryEngine 3
Dunia Engine
Gamebryo
Decima
Unity
id Tech 5
LithTech
Unigine
Frostbite 2
Real Virtuality 2, 3, and 4
HPL Engine 3
Babylon JS
Torque 3D
X-Ray Engine


== See also ==
Ambient occlusion
Shader


== References ==


== External links ==
NVIDIA's HDRR technical summary (PDF)
A HDRR Implementation with OpenGL 2.0
OpenGL HDRR Implementation
High Dynamic Range Rendering in OpenGL (PDF)
Microsoft's technical brief on SM3.0 in comparison with SM2.0
Tom's Hardware: New Graphics Card Features of 2006
List of GPU's compiled by Chris Hare
techPowerUp! GPU Database
Understanding Contrast Ratios in Video Display Devices
Requiem by TBL, featuring real-time HDR rendering in software
List of video games supporting HDR
Examples of high dynamic range photography