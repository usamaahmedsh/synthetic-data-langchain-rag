The Apple Filing Protocol (AFP), formerly AppleTalk Filing Protocol, is a proprietary network protocol, and part of the Apple File Service (AFS), that offers file services for macOS, classic Mac OS, and Apple II computers.  In OS X 10.8 Mountain Lion and earlier, AFP was the primary protocol for file services. Starting with OS X 10.9 Mavericks, Server Message Block (SMB) was made the primary file sharing protocol, with the ability to run an AFP server removed later in macOS 11 Big Sur and the client being marked for deprecation in the 15.5 update of macOS Sequoia. AFP supports Unicode file names, POSIX and access-control list permissions, resource forks, named extended attributes, and advanced file locking.


== Compatibility ==
AFP versions 3.0 and greater rely exclusively on TCP/IP (port 548) for establishing communication, supporting AppleTalk only as a service discovery protocol. The AFP 2.x family supports both TCP/IP (using Data Stream Interface) and AppleTalk for communication and service discovery. Many third-party AFP implementations use AFP 2.x, thereby supporting AppleTalk as a connection method. Still earlier versions rely exclusively on AppleTalk. For this reason, some older literature refers to AFP as "AppleTalk Filing Protocol".  Other literature may refer to AFP as "AppleShare", the name of the Mac OS 9 (and earlier) AFP client.
Notable current compatibility topics are:

Mac OS X v10.4 and later eliminates support for AFP servers that rely solely on AppleTalk for communication.
Computers using classic Mac OS can connect to AFP 3.x servers, with some limitations. For example, the maximum file size in Mac OS 8 is 2 gigabytes. Typically, Mac OS 9.1 or later is recommended for connecting to AFP 3.x servers; for versions of original Mac OS prior to 9.1, installation of the AppleShare client 3.8.8 is required.
AFP 3.0 and later is required for network home directories, since Mac OS X requires POSIX permissions on user home directories. Single sign-on using Kerberos requires AFP 3.1.
APFS: AFP is incompatible with sharing of APFS volumes but is still usable as a Time Machine destination in High Sierra.


== History ==
AFP 1.0 was a joint development between Apple and Centram Systems West (later named TOPS (file server) and Sitka when owned by Sun Microsystems), but 1.0 never shipped.  Early implementations of AFP server software were available in Mac OS starting with System 6, in AppleShare and AppleShare IP, and in early "1.x" releases of Mac OS X Server. In client operating systems, AFP was called "Personal File Sharing", and supported up to ten simultaneous connections. These AFP implementations relied on version 1.x or 2.x of the protocol. AppleShare IP 5.x, 6.x, and the "1.x" releases of Mac OS X Server introduced AFP version 2.2. This was the first version to offer transport connections using TCP/IP as well as AppleTalk. It also increased the maximum share point size from four gigabytes to two terabytes, although the maximum file size that could be stored remained at two gigabytes due to limitations in the original Mac OS.
Changes made in AFP since version 3.0 represent major advances in the protocol, introducing features designed specifically for Mac OS X clients. 
However, like the AppleShare client in original Mac OS, the AFP client in Mac OS X continues to support type and creator codes, along with filename extensions.
AFP 3.0 was introduced in Mac OS X Server 10.0.3, and was used through Mac OS X Server 10.1.5. It was the first version to use the UNIX-style POSIX permissions model and Unicode UTF-8 file name encodings. Version 3.0 supported a maximum share point and file size of two terabytes, the maximum file size and volume size for Mac OS X until version 10.2. (Note that the maximum file size changed from version 2.2, described above.) Before AFP 3.0, 31 bytes was the maximum length of a filename sent over AFP.
AFP 3.1 was introduced in Mac OS X Server version 10.2. Notable changes included support for Kerberos authentication, automatic client reconnect, NFS resharing, and secure AFP connections via Secure Shell (SSH). The maximum share point and file size increased to 8 terabytes with Mac OS X Server 10.2, and then to 16 terabytes with Mac OS X Server 10.3.
AFP 3.2 adds support for Access Control Lists and extended attributes in Mac OS X Server 10.4. Maximum share point size is at least 16 terabytes, although Apple has not published a limits document for Mac OS X Server 10.4. Apple implemented AFP 3.2 support in their AirPort Time Capsule wireless router device.
AFP 3.2+ was introduced in Mac OS X Leopard and adds case sensitivity support and improves support for Time Machine (synchronization, lock stealing, and sleep notifications).
AFP 3.3 mandates support for Replay Cache functionality (required for Time Machine).
AFP 3.4, introduced in OS X Mountain Lion, includes a minor change in the mapping of POSIX errors to AFP errors.
See Apple's Developer documentation on AFP Version Differences.
macOS Tahoe will be the last version of macOS to support AFP, with support being dropped in macOS 27. Time Machine backups using AirPort Time Capsule routers will no longer function.


== macOS client ==
In Mac OS X Tiger, users can connect to AFP servers by browsing for them in the Network globe or entering an AFP Uniform Resource Locator (URL) into the Connect to Server dialog. In Mac OS X Leopard and later releases, AFP shares are displayed in the Finder sidebar. AFP URLs take the form: afp://⟨server⟩/⟨share⟩, where ⟨server⟩ is the server's IP address, Domain Name System (DNS) name, or Bonjour name, and ⟨share⟩ is the name of the share point.  In Snow Leopard and later, a URL of the form afp://⟨server⟩/⟨share⟩/⟨path⟩ can be used to mount a subdirectory underneath a share point.
macOS also offers Personal File Sharing, a "light" implementation of the current version of AFP. In Mac OS X 10.4, users can share the contents of their Public folders by checking Personal File Sharing in the Sharing section of System Preferences.
AFP URLs for AppleTalk servers took the form: afp://at/⟨AppleTalk name⟩:⟨AppleTalk zone⟩. For networks without AppleTalk zones, an asterisk (*) would be substituted for the zone name.


== Third-party implementations ==
Third party server implementations of AFP are available from a number of companies.

An open source AFP server called Netatalk (AFP 3.4) is available for Unix-like operating systems. A range of NAS solutions integrate Netatalk to enable support for AFP.
Novell Open Enterprise Server supports AFP.
Microsoft includes AFP 2.2 server support as an option in some versions of Windows (NT, 2000 & 2003). Windows NT Server (3 and 4) only supported AppleTalk, 2000 added AppleShare over IP; Services for Macintosh (SFM), was removed from Windows Server 2008 onwards.
Novell's NetWare supports AFP.
HELIOS UB+ supports AFP on a whole array of different Unix based platforms.
The open source Filesystem in Userspace (FUSE) and command-line client implementation afpfs-ng for Linux and Unix-like operating systems
GroupLogic ExtremeZ-IP (AFP 3.3) and MacServerIP for Windows offer AFP 3.x support - now Acronis Files Connect.
Adaptec's Snap Server Archived 2021-05-04 at the Wayback Machine is a NAS with a proprietary implementation of AFP 3.1.
Jaffer is a Java implementation of AFP 3.1.
Xinet from North Plains Systems offers an AFP platform that can run on most Unix based platforms.  One of their products, ka-share, has been a main stay on Solaris SPARC and Silicon Graphics IRIX platforms.
Columbia AppleTalk Package (CAP) is a historical open source implementation of AFP and AppleTalk from Columbia University that was last updated in 1996.
supported by GVfs through gfvs-afp-volume-monitor


== See also ==
List of network protocols
List of file systems


== References ==


== External links ==
File Services Manual for Mac OS X Server 10.4
Apple Filing Protocol Programming Guide
Apple Filing Protocol Reference
Mac OS X: Some Mac OS X Applications and Services Require AFP 3.0 or Later 
Inside AppleTalk - original specification for the AppleTalk protocol stack including AFP
Glossary of Networking Terms
NewsFactor Network article, A
Macintosh: File System Specifications and Terms
Apple Technical Note TN1150 on the HFS Plus Volume Format
Apple shifts from AFP to SMB2