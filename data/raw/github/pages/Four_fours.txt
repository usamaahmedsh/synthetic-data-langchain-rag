Four fours is a mathematical puzzle, the goal of which is to find the simplest mathematical expression for every whole number from 0 to some maximum, using only common mathematical symbols and the digit four. No other digit is allowed. Most versions of the puzzle require that each expression have exactly four fours, but some variations require that each expression have some minimum number of fours. The puzzle requires skill and mathematical reasoning.
The first printed occurrence of the specific problem of four fours is in Knowledge: An Illustrated Magazine of Science in 1881. A similar problem involving arranging four identical digits to equal a certain amount was given in Thomas Dilworth's popular 1734 textbook The Schoolmaster's Assistant, Being a Compendium of Arithmetic Both Practical and Theoretical.
W. W. Rouse Ball described it in the 6th edition (1914) of his Mathematical Recreations and Essays. In this book it is described as a "traditional recreation".


== Rules ==
There are many variations of four fours; their primary difference is which mathematical symbols are allowed. Essentially all variations at least allow addition ("+"), subtraction ("−"), multiplication ("×"), division ("÷"), and parentheses, as well as concatenation (e.g., "44" is allowed). Most also allow the factorial ("!"), exponentiation (e.g. "444"), the decimal point (".") and the square root ("√") operation. Other operations allowed by some variations include the reciprocal function ("1/x"), subfactorial ("!" before the number: !4 equals 9), overline (an infinitely repeated digit), an arbitrary root, the square function ("sqr"), the cube function ("cube"), the cube root, the gamma function (Γ(), where Γ(x) = (x − 1)!), and percent ("%"). Therefore:

  
    
      
        4
        %
        =
        0.04
      
    
    {\displaystyle 4\%=0.04}
  

  
    
      
        s
        q
        r
        (
        4
        )
        =
        16
      
    
    {\displaystyle sqr(4)=16}
  

  
    
      
        c
        u
        b
        e
        (
        4
        )
        =
        64
      
    
    {\displaystyle cube(4)=64}
  

  
    
      
        
          
            4
          
        
        =
        2
      
    
    {\displaystyle {\sqrt {4}}=2}
  

  
    
      
        4
        !
        =
        24
      
    
    {\displaystyle 4!=24}
  

  
    
      
        Γ
        (
        4
        )
        =
        6
      
    
    {\displaystyle \Gamma (4)=6}
  

  
    
      
        !
        4
        =
        9
      
    
    {\displaystyle !4=9}
  

  
    
      
        
          4
          ′
        
        =
        
          
            1
            4
          
        
        =
        0.25
      
    
    {\displaystyle 4'={\frac {1}{4}}=0.25}
  

  
    
      
        .4
        =
        0.4
        =
        
          
            4
            10
          
        
        =
        
          
            2
            5
          
        
      
    
    {\displaystyle .4=0.4={\frac {4}{10}}={\frac {2}{5}}}
  

  
    
      
        4.4
        =
        4
        
          
            2
            5
          
        
      
    
    {\displaystyle 4.4=4{\frac {2}{5}}}
  

  
    
      
        .
        
          
            4
            ¯
          
        
        =
        .4444
        .
        .
        .
        =
        
          
            4
            9
          
        
      
    
    {\displaystyle .{\overline {4}}=.4444...={\frac {4}{9}}}
  

etc.
A common use of the overline in this problem is for this value:

  
    
      
        .
        
          
            4
            ¯
          
        
        =
        .4444
        .
        .
        .
        =
        
          
            4
            9
          
        
      
    
    {\displaystyle .{\overline {4}}=.4444...={\frac {4}{9}}}
  

Typically, the successor function is not allowed since any integer above 4 is trivially reachable with it. Similarly, "log" operators are usually not allowed as they allow a general method to produce any non-negative integer. This works by noticing three things:

It is possible to take square roots repeatedly without using any additional 4s
A square root can also be written as the exponent (^(1/2))
Exponents have logarithms as their inverse.

  
    
      
        
          
            
              
                
                  ⋯
                  
                    
                      4
                    
                  
                
              
              ⏟
            
          
          
            n
          
        
        =
        
          4
          
            (
            1
            
              /
            
            2
            
              )
              
                n
              
            
          
        
      
    
    {\displaystyle \underbrace {\sqrt {\sqrt {\cdots {\sqrt {4}}}}} _{n}=4^{(1/2)^{n}}}
  

Writing repeated square root in this form we can isolate n, which is the number of square roots:

  
    
      
        
          4
          
            (
            1
            
              /
            
            2
            
              )
              
                n
              
            
          
        
      
    
    {\displaystyle 4^{(1/2)^{n}}}
  

We can isolate both exponents by using the base 4 logarithm:

  
    
      
        
          log
          
            4
          
        
        ⁡
        
          4
          
            (
            1
            
              /
            
            2
            
              )
              
                n
              
            
          
        
      
    
    {\displaystyle \log _{4}4^{(1/2)^{n}}}
  

This logarithm can be thought of as the answer to the question: "4 to what power gives me 4 to the half power to the n power?"

  
    
      
        
          4
          
            x
          
        
        =
        
          4
          
            (
            1
            
              /
            
            2
            
              )
              
                n
              
            
          
        
      
    
    {\displaystyle 4^{x}=4^{(1/2)^{n}}}
  

so we are now left with:

  
    
      
        (
        1
        
          /
        
        2
        
          )
          
            n
          
        
      
    
    {\displaystyle (1/2)^{n}}
  

and now we can take a logarithm to isolate the exponent, n:

  
    
      
        n
        =
        
          log
          
            (
            1
            
              /
            
            2
            )
          
        
        ⁡
        (
        1
        
          /
        
        2
        
          )
          
            n
          
        
      
    
    {\displaystyle n=\log _{(1/2)}(1/2)^{n}}
  

so, putting it all together:

  
    
      
        n
        =
        
          log
          
            (
            1
            
              /
            
            2
            )
          
        
        ⁡
        
          log
          
            4
          
        
        ⁡
        
          4
          
            (
            1
            
              /
            
            2
            
              )
              
                n
              
            
          
        
      
    
    {\displaystyle n=\log _{(1/2)}\log _{4}4^{(1/2)^{n}}}
  

Now, we can rewrite the base (1/2) with only 4s and the exponent (1/2) back to a square root:

  
    
      
        n
        =
        
          log
          
            
              
                4
              
            
            
              /
            
            4
          
        
        ⁡
        
          log
          
            4
          
        
        ⁡
        
          
            
              
                
                  ⋯
                  
                    
                      4
                    
                  
                
              
              ⏟
            
          
          
            n
          
        
      
    
    {\displaystyle n=\log _{{\sqrt {4}}/4}\log _{4}\underbrace {\sqrt {\sqrt {\cdots {\sqrt {4}}}}} _{n}}
  

We have used four fours and now the number of square roots we add equals whatever non-negative integer we wanted.
Paul Bourke credits Ben Rudiak-Gould with a different description of how four fours can be solved using natural logarithms (ln(n)) to represent any positive integer n as:

  
    
      
        n
        =
        −
        
          
            4
          
        
        
          
            
              ln
              ⁡
              
                [
                
                  
                    (
                    
                      ln
                      ⁡
                      
                        
                          
                            
                              
                                ⋯
                                
                                  
                                    4
                                  
                                
                              
                            
                            ⏟
                          
                        
                        
                          n
                        
                      
                    
                    )
                  
                  
                    /
                  
                  ln
                  ⁡
                  4
                
                ]
              
            
            
              ln
              ⁡
              
                4
              
            
          
        
      
    
    {\displaystyle n=-{\sqrt {4}}{\frac {\ln \left[\left(\ln \underbrace {\sqrt {\sqrt {\cdots {\sqrt {4}}}}} _{n}\right)/\ln 4\right]}{\ln {4}}}}
  

A more computationally efficient solution is due to Bruce David Wilner:

  
    
      
        n
        =
        
          log
          
            
              4
            
          
        
        ⁡
        
          [
          
            
              
                
                  4
                  4
                
                
                  
                    
                      
                        ⋯
                        
                          
                            4
                          
                        
                      
                    
                    ⏟
                  
                
              
            
            
              n
            
          
          ]
        
      
    
    {\displaystyle n=\log _{\sqrt {4}}\left[{\frac {\frac {4}{4}}{\underbrace {\sqrt {\sqrt {\cdots {\sqrt {4}}}}} }}_{n}\right]}
  

which incorporates only one direct log() call vice four per Rudiak-Gould (three if the value of log 4 is saved).  Note that both solutions incorporate a chain of square root operations, which requires at least one log() call and at least one exp() call to evaluate, since, e.g., sqrt( sqrt( sqrt( 4 ) ) ) can be evaluated as exp( 0.5 * 0.5 *0.5 * log( 4 ) ).
Additional variants (usually no longer called "four fours") replace the set of digits ("4, 4, 4, 4") with some other set of digits, say of the birthyear of someone. For example, a variant using "1975" would require each expression to use one 1, one 9, one 7, and one 5.


== Solutions ==
Here is a set of four fours solutions for the numbers 0 through 32, using typical rules. Some alternate solutions are listed here, although there are actually many more correct solutions. The entries in blue are those that use four integers 4 (rather than four digits 4) and the basic arithmetic operations. Numbers without blue entries have no solution under these constraints. Additionally, solutions that repeat operators are marked in italics.

      0 =  4 ÷ 4 × 4 − 4  =   44 − 44
      1 =  4 ÷ 4 + 4 − 4  =   44 ÷ 44
      2 =  4 −(4 + 4)÷ 4  =  (44 + 4)÷ 4!
      3 = (4 × 4 − 4)÷ 4  =  (4 + 4 + 4)÷ 4
      4 =  4 + 4 ×(4 − 4) =  −44 + 4!+ 4!
      5 = (4 × 4 + 4)÷ 4  =  (44 − 4!)÷ 4
      6 = (4 + 4)÷ 4 + 4  =   4.4 + 4 ×.4
      7 =  4 + 4 − 4 ÷ 4  =   44 ÷ 4 − 4
      8 =  4 ÷ 4 × 4 + 4  =   4.4 −.4 + 4
      9 =  4 ÷ 4 + 4 + 4  =   44 ÷ 4 −√4
     10 = (4 + 4 + 4)−√4  =  (44 − 4)÷ 4
     11 = (4!×√4 − 4)÷ 4  =  √4 ×(4!−√4)÷ 4
     12 =  4 ×(4 − 4 ÷ 4) =  (44 + 4)÷ 4
     13 = (4!×√4 + 4)÷ 4  =  (4 −.4)÷.4 + 4
     14 =  4 × 4 − 4 ÷√4  =   4 ×(√4 +√4)−√4
     15 =  4 × 4 − 4 ÷ 4  =   44 ÷ 4 + 4
     16 =  4 × 4 + 4 − 4  =  (44 − 4)×.4
     17 =  4 × 4 + 4 ÷ 4  =  (44 + 4!)÷ 4
     18 =  4 × 4 + 4 −√4  =  (44 ÷√4) − 4
     19 =  4!−(4 + 4 ÷ 4) =  (4 + 4 −.4)÷.4 
     20 =  4 ×(4 ÷ 4 + 4) =  (44 − 4)÷√4
     21 =  4!− 4 + 4 ÷ 4  =  (44 −√4)÷√4
     22 =  4!÷ 4 + 4 × 4  =   44 ÷(4 −√4)
     23 =  4!+ 4 ÷ 4 −√4  =  (44 +√4)÷√4
     24 =  4 × 4 + 4 + 4  =  (44 + 4)÷√4
     25 =  4!− 4 ÷ 4 +√4  =  (4 + 4 +√4)÷.4
     26 =  4!+√4 + 4 - 4
     27 =  4!+√4 +(4 ÷ 4)
     28 = (4 + 4)× 4 − 4  =   4!+ 4 + 4 - 4
     29 =  4!+ 4 +(4 ÷ 4)
     30 =  4!+ 4 + 4 -√4
     31 =  4!+(4!+ 4)÷ 4
     32 =  4 × 4 + 4 × 4
    100 =  4 × 4! +√4 +√4
   1000 =  4 x 4^4 - 4!
1000000 =  (4 ÷ .4)^(4 + √4)

Note that numbers with values less than one are not usually written with a leading zero. For example, "0.4" is usually written as ".4".  This is because "0" is a digit, and in this puzzle only the digit "4" can be used.
There are also many other ways to find the answer for all of these. A given number will generally have a few possible solutions; any solution that meets the rules is acceptable. Some variations prefer the "fewest" number of operations or prefer some operations to others.  Others simply prefer "interesting" solutions, i.e., a surprising way to reach the goal.
Certain numbers, such as 113, 157, and 347, are particularly difficult to solve under typical rules. For 113, Wheeler suggests 
  
    
      
        Γ
        (
        Γ
        (
        4
        )
        )
        −
        
          
            
              4
              !
              +
              4
            
            4
          
        
      
    
    {\displaystyle \Gamma (\Gamma (4))-{\frac {4!+4}{4}}}
  
.  Another solution is 
  
    
      
        4
        (
        4
        !
        +
        4
        )
        +
        Γ
        
          (
          
            
              4
            
          
          )
        
      
    
    {\displaystyle 4(4!+4)+\Gamma \left({\sqrt {4}}\right)}
  
. A non-standard solution is 
  
    
      
        4
        (
        4
        !
        +
        4
        +
        
          4
          ′
        
        )
      
    
    {\displaystyle 4(4!+4+4')}
  
, where 4' is the multiplicative inverse of 4. (i.e. 
  
    
      
        
          
            1
            4
          
        
      
    
    {\displaystyle {\frac {1}{4}}}
  
) Another possible solution is 
  
    
      
        
          
            
              (
              (
              4
              !
              )
              
                !
                
                  14
                
              
              )
              
                !
                
                  127
                
              
            
            
              (
              4
              !
              )
              
                !
                
                  14
                
              
            
          
        
      
    
    {\displaystyle {\frac {((4!)!_{14})!_{127}}{(4!)!_{14}}}}
  
, where 
  
    
      
        
          !
          
            14
          
        
      
    
    {\displaystyle !_{14}}
  
 and 
  
    
      
        
          !
          
            127
          
        
      
    
    {\displaystyle !_{127}}
  
 represent the 14th and 127th multifactorials respectively and should technically be denoted with that many exclamation marks to adhere to the rules of the problem. Note that the number 113/16 can be written by three 4's, but this does not help for 113 unless the square function (i.e. sq(4) = 16) is allowed.
The use of percent ("%") admits solutions for a much greater proportion of numbers; for example, 113 = (√4 + (√4 + 4!)%) ÷ (√4)%.


== Algorithmics of the problem ==
This problem and its generalizations (like the five fives and the six sixes problem, both shown below) may be solved by a simple algorithm. The basic ingredients are hash tables that map rationals to strings. In these tables, the keys are the numbers being represented by some admissible combination of operators and the chosen digit d, e.g. four, and the values are strings that contain the actual formula. There is one table for each number n of occurrences of d. For example, when d=4, the hash table for two occurrences of d would contain the key-value pair 8 and 4+4, and the one for three occurrences, the key-value pair 2 and (4+4)/4 (strings shown in bold).
The task is then reduced to recursively computing these hash tables for increasing n, starting from n=1 and continuing up to e.g. n=4. The tables for n=1 and n=2 are special, because they contain primitive entries that are not the combination of other, smaller formulas, and hence they must be initialized properly, like so (for n=1)

       T[4]    := "4";
       T[4/10] := ".4";
       T[4/9]  := ".4...";

and

        T[44] := "44";.

(for n=2). Now there are two ways in which new entries may arise, either as a combination of existing ones through a binary operator, or by applying the factorial or square root operators (which does not use additional instances of d). The first case is treated by iterating over all pairs of subexpressions that use a total of n instances of d. For example, when n=4, we would check pairs (a,b) with a containing one instance of d and b three, and with a containing two instances of d and b two as well. We would then enter a+b, a-b, b-a, a*b, a/b, b/a) into the hash table, including parenthesis, for n=4. Here the sets A and B that contain a and b are calculated recursively, with n=1 and n=2 being the base case. Memoization is used to ensure that every hash table is only computed once. 
The second case (factorials and roots) is treated with the help of an auxiliary function, which is invoked every time a value v is recorded. This function computes nested factorials and roots of v up to some maximum depth, restricted to rationals.
The last phase of the algorithm consists in iterating over the keys of the table for the desired value of n and extracting and sorting those keys that are integers. This algorithm was used to calculate the five fives and six sixes examples shown below. The more compact formula (in the sense of number of characters in the corresponding value) was chosen every time a key occurred more than once.


== Excerpt from the solution to the six sixes problem ==
In the table below, the notation .6... represents the value 6/9 or 2/3 (recurring decimal 6).

241 = ((.6+((6+6)*(6+6)))/.6)
242 = ((6*(6+(6*6)))-(6/.6))
243 = (6+((6*(.6*66))-.6))
244 = (.6...*(6+(6*(66-6))))
245 = ((((6)!+((6)!+66))/6)-6)
246 = (66+(6*((6*6)-6)))
247 = (66+((6+((6)!/.6...))/6))
248 = (6*(6+(6*(6-(.6.../6)))))
249 = (.6+(6*(6+((6*6)-.6))))
250 = (((6*(6*6))-66)/.6)
251 = ((6*(6+(6*6)))-(6/6))


== See also ==
Krypto (game)


== References ==


== External links ==
Bourke, Paul. "Four Fours Problem".
Carver, Ruth. "Four Fours Puzzle". at MathForum.org
"4444 (Four Fours)". Archived from the original on 2011-08-02. Retrieved 2010-06-04. Eyegate Gallery.
Four fours
four4s on GitHub
"Online Implementation of the Four Fours Game".