libjpeg is a free library with functions for handling the JPEG image data format. It implements a JPEG codec (encoding and decoding) alongside various utilities for handling JPEG data.
It is written in C and distributed as free software together with its source code under the terms of a custom permissive (BSD-like) free software license, which demands attribution.
The original variant is maintained and published by the Independent JPEG Group (IJG). Meanwhile, there are several forks with additional features.
JPEG JFIF images are widely used on the Web. The amount of compression can be adjusted to achieve the desired trade-off between file size and visual quality.


== Utilities ==
The following utility programs are shipped together with libjpeg:

cjpeg and djpeg
for performing conversions between JPEG and some other popular image file formats.
rdjpgcom and wrjpgcom
for inserting and extracting textual comments in JPEG files.
jpegtran
for transformation of existing JPEG files.


=== jpegtran ===

The command-line program jpegtran provides several features for reformatting and recoding the representation of the DCT coefficients, for transformation of actual image data and for discarding auxiliary data in JPEG files, respectively. The transformations regarding the representation of the coefficients comprise:

optimisation of the Huffman coding layer of a JPEG file to increase compression,
conversion between progressive and sequential JPEG formats,
conversion between Huffman and arithmetic coding in the entropy coding layer.
These transformations are each completely lossless and reversible. The transformations on the image data comprise:

eliminate non-standard application-specific data inserted by some image programs,
perform certain transformations on a file, such as:
discarding of colour channels (conversion to greyscale),
rotating and flipping in steps of 90 degrees,
cropping or joining at image block borders (every 8×8 or 16×16 pixels),
rescaling.
These are lossless and reversible only regarding the image data that is kept. Reencoding with repeated lossy quantisation of the image data (generation loss) does not take place.


== History ==
The JPEG implementation of the Independent JPEG Group (IJG) was first publicly released on 7 October 1991 and has been considerably developed since that time.
The development was initially mainly done by Tom Lane.
The open-source implementation of the IJG was one of the major open-source packages and was key to the success of the JPEG standard. Many companies incorporated it into a variety of products such as image editors and web browsers.
For version 5, which was released on September 24, 1994, the whole code base was rewritten. It introduced the utility programs rdjpgcom and wrjpgcom for handling embedded text comments.
The version 6 from 2 August 1995 came with support for progressive JPEG and for the first time with the utility program jpegtran. This utility was extended with features to rotate and flip images and grayscale reduction in version 6b.


=== libjpeg-turbo and descendants ===
From version 6b of libjpeg of 27 March 1998, Miyasaka Masaru forked a branch named libjpeg/SIMD, which included x86 SIMD optimisations. It got substantial contributions from the TigerVNC and the VirtualGL projects in 2009. On that basis the libjpeg-turbo project was created in 2010.
On 4 March 2014, the first version of the filesize-optimising fork MozJPEG was published. For this version Josh Aas from Mozilla Research reworked the Perl script jpegcrush from x264's main developer Loren Merritt and integrated it into the code base of libjpeg-turbo.
On 10 July 2014, Mozilla released version 2.0, which mainly added trellis quantisation and is now able to reduce the size of baseline JPEGs also. Facebook, Inc. donated 60000 dollars for the development of the next version, and CloudFlare assigned a developer for the improvement of MozJPEG.
In 2019, libjpeg-turbo became the ISO and ITU endorsed reference implementation for the JPEG format.
In April 2024, Google introduced Jpegli, a new JPEG coding library that offers enhanced capabilities and a 35% compression ratio improvement at high quality compression settings, while the coding speed is comparable with MozJPEG.


=== Change in IJG leadership ===
After 11 years and a change in leadership, the IJG under Guido Vollbeding released new versions of libjpeg (7 through 9), of which each broke ABI compatibility with previous versions. The changes that were held in prospect after the 6x series were not delivered.
In version 7, support for arithmetic coding was introduced, which earlier has been rejected because of the patent situation, as well as the crop feature in jpegtran (-crop).
Versions 8 and 9 served basically for the introduction of controversial incompatible format extensions. These are widely regarded as ineffective and inferior to existing, standardised solutions. Their standardisation was rejected after submission to the ITU-T. The original organiser Tom Lane and others criticize these changes as a break from the goals of the IJG.


== Versions ==


== Forks ==
Well-known forks are libjpeg-turbo, which optimises for speed of execution, and MozJPEG, which optimises for smaller file sizes.
There is also a similarly named library from the ISO, which aims to be a complete implementation of JPEG, JPEG XT and JPEG LS standards.


=== libjpeg-turbo ===
 
libjpeg-turbo is a fork of libjpeg that uses SIMD instructions to accelerate baseline JPEG encoding and decoding. Many projects are now using libjpeg-turbo instead of libjpeg, including popular Linux distributions (Fedora, Debian, Mageia, openSUSE, ...), Mozilla, and Chrome. Apart from performance, some projects have chosen to use libjpeg-turbo because it allows them to retain backward ABI compatibility with the older libjpeg v6b release. libjpeg v7, v8 and v9 broke ABI compatibility with prior releases.
libjpeg-turbo implements the standard-compliant arithmetic coding and lossless crop features seen in libjpeg v7. It can also be configured to be compatible with the libjpeg v7 or v8 ABI, but it does implement DCT scaling and the proprietary SmartScale, which builds on DCT scaling. libjpeg-turbo chooses not to support SmartScale, because it is not an ITU-T standard and because their own research finds it (and DCT scaling) ineffective. By extension, since the only major new feature in libjpeg v9 is specific to the SmartScale format, the libjpeg-turbo Project has chosen to forgo emulating libjpeg v9.
Since 2019, libjpeg-turbo is one of the two JPEG reference implementations, available as ISO/IEC 10918-7 and ITU-T T.873. The other reference implementation is ISO libjpeg which also includes support for JPEG XT and JPEG LS.


=== MozJPEG ===
 
MozJPEG is a fork from libjpeg-turbo done by Josh Aas and others from Mozilla Research. It aims to speed up loading times of webpages by achieving a reduction in file size (of about 10%) and therefore transmission time through improvement of coding efficiency while retaining image quality. To achieve this, it uses more processing power for the encoding (asymmetry) while retaining full compatibility with the JPEG standard and requiring no changes on the decoder side.
The techniques MozJPEG uses to achieve high compression include optimising Huffman trees, using progressive coding to optimally split the spectrum of DCT coefficients into separate scans, and through the use of trellis quantisation. Additionally, the presets are aggressively tuned towards the minimisation of file sizes.
Besides libjpeg-turbo, MozJPEG also builds upon jpegcrush, a Perl script by Loren Merritt.


=== Jpegli ===
 
In April 2024, Google introduced Jpegli, a new JPEG coding library that offers enhanced capabilities and a 35% compression ratio improvement at high quality compression settings, while the coding speed is comparable with MozJPEG.


== ISO libjpeg ==

ISO/IEC Joint Photography Experts Group maintains a reference software implementation for base JPEG (ISO/IEC 10918-1 and 18477-1) and JPEG XT extensions (ISO/IEC 18477 Parts 2 and 6-9), as well as lossless JPEG-LS (ISO/IEC 14495). It also includes some of the optimizations of MozJPEG. Though also named libjpeg, it is not related to the source code provided by Independent JPEG Group (IJG) and does not support proprietary extensions introduced by IJG since 2007.


== See also ==

Lossless editing
The Guetzli JPEG encoder


== References ==


== External links ==

JPEG FAQs
Nyman, Robert; Aas, Josh (Aug 6, 2014). "Using MozJPEG to Create Efficient JPEGs". Hacks. Mozilla.