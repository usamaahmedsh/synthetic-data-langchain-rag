Clean is a general-purpose purely functional programming language. Originally called the Concurrent Clean System or the Clean System, it has been developed by a group of researchers from the Radboud University in Nijmegen since 1987. Although development of the language has slowed, some researchers are still working in the language. In 2018, a spin-off company was founded that uses Clean.


== Features ==
Clean shares many properties and syntax with a younger sibling language, Haskell: referential transparency, list comprehension, guards, garbage collection, higher order functions, currying, and lazy evaluation. However, Clean deals with mutable state and input/output (I/O) through a uniqueness type system, in contrast to Haskell's use of monads. The compiler takes advantage of the uniqueness type system to generate more efficient code, because it knows that at any point during the execution of the program, only one reference can exist to a value with a unique type. Therefore, a unique value can be changed in place.
An integrated development environment (IDE) for Microsoft Windows is included in the Clean distribution.


== Examples ==
Hello world:

Factorial:

Fibonacci sequence:

Infix operator:

The type declaration states that the function is a right associative infix operator with priority 8: this states that x*x^(n-1) is equivalent to x*(x^(n-1)) as opposed to (x*x)^(n-1). This operator is  pre-defined in StdEnv, the Clean standard library.


== How Clean works ==
Computing is based on graph rewriting and reduction. Constants such as numbers are graphs and functions are graph rewriting formulas. This, combined with compiling to native code, makes Clean programs which use high abstraction run relatively fast according to The Computer Language Benchmarks Game. A 2008 benchmark showed that Clean native code performs similarly to the Glasgow Haskell Compiler (GHC), depending on the benchmark.


== Compiling ==
Compilation of Clean to machine code is performed as follows:

Source files (.icl) and definition files (.dcl) are translated into Core Clean, a basic variant of Clean, by the compiler frontend written in Clean.
Core clean is converted into Clean's platform-independent intermediate language (.abc), by the compiler backend written in Clean and C.
Intermediate ABC code is converted to object code (.o) by the code generator written in C.
Object code is linked with other files in the module and the runtime system and converted into a normal executable using the system linker (when available) or a dedicated linker written in Clean on Windows.
Earlier versions of the Clean compiler were written completely in C, thus avoiding bootstrapping issues.


=== The ABC machine ===
The ABC code mentioned above is an intermediate representation for an abstract machine. Because machine code generation for ABC code is relatively straightforward, it is easy to support new architectures. The ABC machine is an imperative abstract graph rewriting machine. It consists of a graph store to hold the Clean graph that is being rewritten and three stacks:

The A(rgument)-stack holds arguments that refer to nodes in the graph store.
The B(asic value)-stack holds basic values (integers, characters, reals, etc.). Although these values could be nodes in the graph store, a separate stack is used for efficiency.
The C(ontrol)-stack holds return addresses for flow control.
The runtime system, which is linked into every executable, builds a Start node in the graph store and pushes it on the A-stack. It then begins printing it, evaluating it as needed.


=== Running Clean in the browser ===
Although Clean is typically used to generate native executables, several projects have enabled applications in web browsers.
The now abandoned SAPL project compiled Core Clean to JavaScript and did not use ABC code. Since 2019, an interpreter for ABC code, written in WebAssembly, is used instead.


== Platforms ==
Clean is available for Microsoft Windows (IA-32 and X86-64), macOS (X86-64), and Linux (IA-32, X86-64, and AArch64).
Some libraries are not available on all platforms, like ObjectIO which is only available on Windows. Also the feature to write dynamics to files is only available on Windows.
The availability of Clean per platform varies with each version:


== Comparison to Haskell ==
The syntax of Clean is very similar to that of Haskell, with some notable differences. In general, Haskell has introduced more syntactic sugar than Clean:


== References ==


== External links ==
Clean Wiki
clean-lang.org: public registry with Clean packages
cloogle.org: a search engine to search in Clean packages