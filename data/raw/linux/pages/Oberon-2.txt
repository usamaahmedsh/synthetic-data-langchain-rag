Oberon-2 is an extension of the original Oberon programming language that adds limited reflective programming (reflection) and object-oriented programming facilities, open arrays as pointer base types, read-only field export, and reintroduces the FOR loop from Modula-2.
It was developed in 1991 at ETH Zurich by Niklaus Wirth and Hanspeter Mössenböck, who is now at Institut für Systemsoftware (SSW) of the University of Linz, Austria. Oberon-2 is a superset of Oberon, is fully compatible with it, and was a redesign of Object Oberon.
Oberon-2 inherited limited reflection and single inheritance ("type extension") without the interfaces or mixins from Oberon, but added efficient virtual methods ("type bound procedures"). Method calls were resolved at runtime using C++-style virtual method tables.
Compared to fully object-oriented languages like Smalltalk, in Oberon-2, basic data types and classes are not objects, many operations are not methods, there is no message passing (it can be emulated somewhat by reflection and through message extension, as demonstrated in ETH Oberon), and polymorphism is limited to subclasses of a common class (no duck typing as in Python, and it's not possible to define interfaces as in Java). Oberon-2 does not support encapsulation at object or class level, but modules can be used for this purpose.
Reflection in Oberon-2 does not use metaobjects, but simply reads from type descriptors compiled into the executable binaries, and exposed in the modules that define the types and/or procedures. If the format of these structures are exposed at the language level (as is the case for ETH Oberon, for example), reflection could be implemented at the library level. It could thus be implemented almost entirely at library level, without changing the language code. Indeed, ETH Oberon makes use of language-level and library-level reflection abilities extensively.
Oberon-2 provides built-in runtime support for garbage collection similar to Java and performs bounds and array index checks, etc., that eliminate the potential stack and array bounds overwriting problems and manual memory management issues inherent in C and C++. Separate compiling using symbol files and namespaces via the module architecture ensure fast rebuilds since only modules with changed interfaces need to be recompiled.
The language Component Pascal is a refinement (a superset) of Oberon-2.


== Example code ==
The following Oberon-2 code implements a simple binary tree:


== Oberon-2 extensions to Oberon ==
Source:


=== Type-bound procedures ===
Procedures can be bound to a record (or pointer) type. They are equivalent to instance methods in object-oriented terminology.


=== Read-only export ===
The use of exported variables and record fields can be restricted to read-only access. This is shown with a "-" visibility flag.


=== Open arrays ===
Open arrays which formerly could only be declared as formal parameter types may now be declared as pointer base types.


=== FOR statement ===
The FOR statement of Pascal and Modula-2 was not implemented in Oberon. It is reintroduced in Oberon-2.


=== Runtime type checking ===
Oberon-2 provides several mechanisms for checking the dynamic type of an object. For example, where a Bird object might be instantiated to either a Duck or a Cuckoo, Oberon-2 allows the programmer to respond to the actual type of the object at runtime.
The first, most conventional, approach is to rely on the type binding system. The second approach is to use the WITH statement, which allows the dynamic subtype of a variable to be checked directly. In both cases, once the subtype has been identified, the programmer can make use of any type-bound procedures or variables that are appropriate to the subtype. Examples of these approaches are shown below.
Note that the form of WITH statement used in Oberon-2 is unrelated to the Pascal and Modula-2 WITH statement. This method of abbreviating access to record fields is not implemented in Oberon or Oberon-2.


==== Type binding ====


==== WITH statement ====


==== POINTER ====


==== IS operator ====
A third approach is possible using the IS operator. This is a relation operator with the same precedence as equals (=), greater (>), etc. but which tests dynamic type. Unlike the two other approaches, however, it does not allow the programmer access to the subtype that has been detected.


== Syntax ==
The development of the ALGOL → Pascal → Modula-2 → Oberon → Component Pascal language family is marked by a reduction in the complexity of the language syntax. The entire Oberon-2 language is described (Mössenböck & Wirth, March 1995) using only 33 grammatical productions in the extended Backus–Naur form, as shown below.


== Implementations ==
Oberon-2 compilers maintained by ETH include versions for Windows, Linux, Solaris, macOS.
The Oxford Oberon-2 compiler compiles to native machine code and can use a JIT on Windows, Linux, and macOS. It is created and maintained by Mike Spivey and uses the Keiko Virtual Machine.
There is an Oberon-2 Lex scanner and Yacc parser by Stephen J. Bevan of Manchester University, UK, based on the one in the Mössenböck and Wirth reference. It is at version 1.4.
There is a release named Native Oberon which includes an operating system, and can directly boot on PC class hardware.
A .NET implementation of Oberon with the addition of some minor .NET-related extensions has been developed at ETHZ.
Programmer's Open Workbench (POW!) is a very simple integrated development environment, which is provided with editor, linker, and Oberon-2 compiler. This compiles to Windows executables. Full source code is provided; the compiler is written in Oberon-2.
The Java to Oberon Compiler (JOB) was written at the University of Vologda in Russia. It produces object code in the form of Java class files (bytecode). Some JOB-specific classes are provided which are Java compatible, but which use a more Oberon-like component hierarchy.
The Optimizing Oberon-2 Compiler compiles to C, using the GNU Compiler Collection (GCC) toolchain for program generation.
Oberon Script is a compiler that translates the full Oberon language into JavaScript. The compiler is written in JavaScript and can thus be called from Web pages to process scripts written in Oberon.
XDS Modula2/Oberon2 is a development system by Excelsior LLC, Novosibirsk, Russia. It contains an optimizing compiler for Intel Pentium, or "via-C" translator for cross-platform software development. Available for Windows and Linux. The compiler is written in Oberon-2 and compiles itself.
Oberon Revival is a project to bring Oberon 2 and Component Pascal (BlackBox Component Builder) to Linux and Win32. The Linux port of BlackBox was unavailable before and it originally ran on only Microsoft Windows.
XOberon is a real-time operating system for PowerPC, written in Oberon-2.
The Portable Oberon-2 Compiler (OP2) was developed to port the Oberon System onto commercially available platforms.


== Keiko bytecode ==
Oberon-2 can target the Keiko Virtual machine.
For example, like some other language compilers (see O-code, p-code, etc.),
the Oxford Oberon-2 compiler first compiles to an intermediate bytecode (Keiko bytecode) which can be interpreted with a byte-code interpreter or use just-in-time compilation.


== See also ==

A2 (operating system)


== References ==


== Further reading ==

"Oberon Language Genealogy Tree" maintained at ETHZ
"Second International Modula-2 Conference", September 1991.
From Modula to Oberon Archived 23 February 2014 at the Wayback Machine Wirth (1990)
Programming in Oberon - A derivative of Programming in Modula-2 Wirth (1982)
The Programming Language Oberon Wirth (1990)
The Programming Language Oberon-2 H. Mössenböck, N. Wirth, Institut für Computersysteme, ETH Zurich, January 1992 and Structured Programming (1991) 12(4): 179-195.
Various references including electronic online versions
Object-Oriented Programming in Oberon-2 Hanspeter Mössenböck (1994). (Available from Johannes Kepler University as PDF with the friendly permission of Springer-Verlag)
Design Patterns in Oberon-2 and Component Pascal
Project Oberon. The design of an Operating System and Compiler Niklaus Wirth & Jürg Gutknecht (2005)
Project Oberon. The design of an Operating System and Compiler Niklaus Wirth & Jürg Gutknecht (2013)


== External links ==
Official website, ETH Zürich
Oberon Reference page at ETH Zürich
Oberon at SSW, Linz
Pow Tutorial (in Romanian language), by Dan Popa
The Oberon-2 Reflection Model and its Applications