In the mathematical theory of stochastic processes, local time is a stochastic process associated with semimartingale processes such as Brownian motion, that characterizes the amount of time a particle has spent at a given level. Local time appears in various stochastic integration formulas, such as Tanaka's formula, if the integrand is not sufficiently smooth. It is also studied in statistical mechanics in the context of random fields.


== Formal definition ==
For a continuous real-valued semimartingale 
  
    
      
        (
        
          B
          
            s
          
        
        
          )
          
            s
            ≥
            0
          
        
      
    
    {\displaystyle (B_{s})_{s\geq 0}}
  
, the local time of 
  
    
      
        B
      
    
    {\displaystyle B}
  
 at the point 
  
    
      
        x
      
    
    {\displaystyle x}
  
 is the stochastic process which is informally defined by

  
    
      
        
          L
          
            x
          
        
        (
        t
        )
        =
        
          ∫
          
            0
          
          
            t
          
        
        δ
        (
        x
        −
        
          B
          
            s
          
        
        )
        
        d
        [
        B
        
          ]
          
            s
          
        
        ,
      
    
    {\displaystyle L^{x}(t)=\int _{0}^{t}\delta (x-B_{s})\,d[B]_{s},}
  

where 
  
    
      
        δ
      
    
    {\displaystyle \delta }
  
 is the Dirac delta function and 
  
    
      
        [
        B
        ]
      
    
    {\displaystyle [B]}
  
 is the quadratic variation. It is a notion invented by Paul Lévy. The basic idea is that 
  
    
      
        
          L
          
            x
          
        
        (
        t
        )
      
    
    {\displaystyle L^{x}(t)}
  
 is an (appropriately rescaled and time-parametrized) measure of how much time 
  
    
      
        
          B
          
            s
          
        
      
    
    {\displaystyle B_{s}}
  
 has spent at 
  
    
      
        x
      
    
    {\displaystyle x}
  
 up to time 
  
    
      
        t
      
    
    {\displaystyle t}
  
. More rigorously, it may be written as the almost sure limit

  
    
      
        
          L
          
            x
          
        
        (
        t
        )
        =
        
          lim
          
            ε
            ↓
            0
          
        
        
          
            1
            
              2
              ε
            
          
        
        
          ∫
          
            0
          
          
            t
          
        
        
          1
          
            {
            x
            −
            ε
            <
            
              B
              
                s
              
            
            <
            x
            +
            ε
            }
          
        
        
        d
        [
        B
        
          ]
          
            s
          
        
        ,
      
    
    {\displaystyle L^{x}(t)=\lim _{\varepsilon \downarrow 0}{\frac {1}{2\varepsilon }}\int _{0}^{t}1_{\{x-\varepsilon <B_{s}<x+\varepsilon \}}\,d[B]_{s},}
  

which may be shown to always exist. Note that in the special case of Brownian motion (or more generally a real-valued  diffusion  of the form 
  
    
      
        d
        B
        =
        b
        (
        t
        ,
        B
        )
        
        d
        t
        +
        d
        W
      
    
    {\displaystyle dB=b(t,B)\,dt+dW}
  
 where 
  
    
      
        W
      
    
    {\displaystyle W}
  
 is a Brownian motion), the term 
  
    
      
        d
        [
        B
        
          ]
          
            s
          
        
      
    
    {\displaystyle d[B]_{s}}
  
 simply reduces to 
  
    
      
        d
        s
      
    
    {\displaystyle ds}
  
, which explains why it is called the local time of 
  
    
      
        B
      
    
    {\displaystyle B}
  
 at 
  
    
      
        x
      
    
    {\displaystyle x}
  
. For a discrete state-space process 
  
    
      
        (
        
          X
          
            s
          
        
        
          )
          
            s
            ≥
            0
          
        
      
    
    {\displaystyle (X_{s})_{s\geq 0}}
  
, the local time can be expressed more simply as

  
    
      
        
          L
          
            x
          
        
        (
        t
        )
        =
        
          ∫
          
            0
          
          
            t
          
        
        
          1
          
            {
            x
            }
          
        
        (
        
          X
          
            s
          
        
        )
        
        d
        s
        .
      
    
    {\displaystyle L^{x}(t)=\int _{0}^{t}1_{\{x\}}(X_{s})\,ds.}
  


== Tanaka's formula ==
Tanaka's formula also provides a definition of local time for an arbitrary continuous semimartingale 
  
    
      
        (
        
          X
          
            s
          
        
        
          )
          
            s
            ≥
            0
          
        
      
    
    {\displaystyle (X_{s})_{s\geq 0}}
  
 on 
  
    
      
        
          R
        
        :
      
    
    {\displaystyle \mathbb {R} :}
  

  
    
      
        
          L
          
            x
          
        
        (
        t
        )
        =
        
          |
        
        
          X
          
            t
          
        
        −
        x
        
          |
        
        −
        
          |
        
        
          X
          
            0
          
        
        −
        x
        
          |
        
        −
        
          ∫
          
            0
          
          
            t
          
        
        
          (
          
            
              1
              
                (
                0
                ,
                ∞
                )
              
            
            (
            
              X
              
                s
              
            
            −
            x
            )
            −
            
              1
              
                (
                −
                ∞
                ,
                0
                ]
              
            
            (
            
              X
              
                s
              
            
            −
            x
            )
          
          )
        
        
        d
        
          X
          
            s
          
        
        ,
        
        t
        ≥
        0.
      
    
    {\displaystyle L^{x}(t)=|X_{t}-x|-|X_{0}-x|-\int _{0}^{t}\left(1_{(0,\infty )}(X_{s}-x)-1_{(-\infty ,0]}(X_{s}-x)\right)\,dX_{s},\qquad t\geq 0.}
  

A more general form was proven independently by Meyer and Wang; the formula extends Itô's lemma for twice differentiable functions to a more general class of functions. If 
  
    
      
        F
        :
        
          R
        
        →
        
          R
        
      
    
    {\displaystyle F:\mathbb {R} \rightarrow \mathbb {R} }
  
 is absolutely continuous  with derivative 
  
    
      
        
          F
          ′
        
        ,
      
    
    {\displaystyle F',}
  
 which is of bounded variation, then

  
    
      
        F
        (
        
          X
          
            t
          
        
        )
        =
        F
        (
        
          X
          
            0
          
        
        )
        +
        
          ∫
          
            0
          
          
            t
          
        
        
          F
          
            −
          
          ′
        
        (
        
          X
          
            s
          
        
        )
        
        d
        
          X
          
            s
          
        
        +
        
          
            1
            2
          
        
        
          ∫
          
            −
            ∞
          
          
            ∞
          
        
        
          L
          
            x
          
        
        (
        t
        )
        
        d
        
          F
          
            −
          
          ′
        
        (
        x
        )
        ,
      
    
    {\displaystyle F(X_{t})=F(X_{0})+\int _{0}^{t}F'_{-}(X_{s})\,dX_{s}+{\frac {1}{2}}\int _{-\infty }^{\infty }L^{x}(t)\,dF'_{-}(x),}
  

where 
  
    
      
        
          F
          
            −
          
          ′
        
      
    
    {\displaystyle F'_{-}}
  
 is the left derivative.
If 
  
    
      
        X
      
    
    {\displaystyle X}
  
 is a Brownian motion, then for any 
  
    
      
        α
        ∈
        (
        0
        ,
        1
        
          /
        
        2
        )
      
    
    {\displaystyle \alpha \in (0,1/2)}
  
 the field of local times 
  
    
      
        L
        =
        (
        
          L
          
            x
          
        
        (
        t
        )
        
          )
          
            x
            ∈
            
              R
            
            ,
            t
            ≥
            0
          
        
      
    
    {\displaystyle L=(L^{x}(t))_{x\in \mathbb {R} ,t\geq 0}}
  
 has a modification which is a.s. Hölder continuous in 
  
    
      
        x
      
    
    {\displaystyle x}
  
 with exponent 
  
    
      
        α
      
    
    {\displaystyle \alpha }
  
, uniformly for bounded 
  
    
      
        x
      
    
    {\displaystyle x}
  
 and 
  
    
      
        t
      
    
    {\displaystyle t}
  
. In general,  
  
    
      
        L
      
    
    {\displaystyle L}
  
  has a modification that is a.s. continuous in 
  
    
      
        t
      
    
    {\displaystyle t}
  
 and càdlàg in 
  
    
      
        x
      
    
    {\displaystyle x}
  
.
Tanaka's formula provides the explicit Doob–Meyer decomposition for the one-dimensional reflecting Brownian motion, 
  
    
      
        (
        
          |
        
        
          B
          
            s
          
        
        
          |
        
        
          )
          
            s
            ≥
            0
          
        
      
    
    {\displaystyle (|B_{s}|)_{s\geq 0}}
  
.


== Ray–Knight theorems ==
The field of local times 
  
    
      
        
          L
          
            t
          
        
        =
        (
        
          L
          
            t
          
          
            x
          
        
        
          )
          
            x
            ∈
            E
          
        
      
    
    {\displaystyle L_{t}=(L_{t}^{x})_{x\in E}}
  
 associated to a stochastic process on a space 
  
    
      
        E
      
    
    {\displaystyle E}
  
 is a well studied topic in the area of random fields. Ray–Knight type theorems relate the field Lt to an associated Gaussian process.
In general Ray–Knight type theorems of the first kind consider the field Lt at a hitting time of the underlying process, whilst theorems of the second kind are in terms of a stopping time at which the field of local times first exceeds a given value.


=== First Ray–Knight theorem ===
Let (Bt)t ≥ 0 be a one-dimensional Brownian motion started from B0 = a > 0, and (Wt)t≥0 be a standard two-dimensional Brownian motion started from W0 = 0 ∈ R2. Define the stopping time at which B first hits the origin, 
  
    
      
        T
        =
        inf
        {
        t
        ≥
        0
        :
        
          B
          
            t
          
        
        =
        0
        }
      
    
    {\displaystyle T=\inf\{t\geq 0\colon B_{t}=0\}}
  
. Ray and Knight (independently) showed that

where (Lt)t ≥ 0 is the field of local times of (Bt)t ≥ 0, and equality is in distribution on C[0, a]. The process |Wx|2 is known as the squared Bessel process.


=== Second Ray–Knight theorem ===
Let (Bt)t ≥ 0 be a standard one-dimensional Brownian motion B0 = 0 ∈ R, and let (Lt)t ≥ 0 be the associated field of local times. Let Ta be the first time at which the local time at zero exceeds a > 0

  
    
      
        
          T
          
            a
          
        
        =
        inf
        {
        t
        ≥
        0
        :
        
          L
          
            t
          
          
            0
          
        
        >
        a
        }
        .
      
    
    {\displaystyle T_{a}=\inf\{t\geq 0\colon L_{t}^{0}>a\}.}
  

Let (Wt)t ≥ 0 be an independent one-dimensional Brownian motion started from W0 = 0, then

Equivalently, the process 
  
    
      
        (
        
          L
          
            
              T
              
                a
              
            
          
          
            x
          
        
        
          )
          
            x
            ≥
            0
          
        
      
    
    {\displaystyle (L_{T_{a}}^{x})_{x\geq 0}}
  
 (which is a process in the spatial variable 
  
    
      
        x
      
    
    {\displaystyle x}
  
) is equal in distribution to the square of a 0-dimensional Bessel process started at 
  
    
      
        a
      
    
    {\displaystyle a}
  
, and as such is Markovian.


=== Generalized Ray–Knight theorems ===
Results of Ray–Knight type for more general stochastic processes have been intensively studied, and analogue statements of both (1) and (2) are known for strongly symmetric Markov processes.


== See also ==
Tanaka's formula
Brownian motion
Random field


== Notes ==


== References ==
K. L. Chung and R. J. Williams, Introduction to Stochastic Integration, 2nd edition, 1990, Birkhäuser, ISBN 978-0-8176-3386-8.
M. Marcus and J. Rosen, Markov Processes, Gaussian Processes, and Local Times, 1st edition, 2006, Cambridge University Press ISBN 978-0-521-86300-1
P. Mörters and Y. Peres, Brownian Motion, 1st edition, 2010, Cambridge University Press, ISBN 978-0-521-76018-8.