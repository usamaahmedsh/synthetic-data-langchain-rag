In digital image processing and computer vision, image segmentation is the process of partitioning a digital image into multiple image segments, also known as image regions or image objects (sets of pixels). The goal of segmentation is to simplify and/or change the representation of an image into something that is more meaningful and easier to analyze. Image segmentation is typically used to locate objects and boundaries (lines, curves, etc.) in images. More precisely, image segmentation is the process of assigning a label to every pixel in an image such that pixels with the same label share certain characteristics.
The result of image segmentation is a set of segments that collectively cover the entire image, or a set of contours extracted from the image (see edge detection). Each of the pixels in a region are similar with respect to some characteristic or computed property, such as color, intensity, or texture. Adjacent regions are significantly different with respect to the same characteristic(s). When applied to a stack of images, typical in medical imaging, the resulting contours after image segmentation can be used to create 3D reconstructions with the help of geometry reconstruction algorithms like marching cubes.


== Applications ==

Some of the practical applications of image segmentation are:

Content-based image retrieval
Machine vision
Medical imaging, and imaging studies in biomedical research, including volume rendered images from computed tomography, magnetic resonance imaging, as well as volume electron microscopy techniques such as FIB-SEM.
Locate tumors and other pathologies
Measure tissue volumes
Diagnosis, study of anatomical structure
Surgery planning
Virtual surgery simulation
Intra-surgery navigation
Radiotherapy
Digital Pathology and Histopathology. Nuclei instance segmentation in variously stained whole slide images (WSIs) refers to the automatic delineation of individual cells' nuclei borders. This task is a specialized subproblem of instance segmentation, with high practical importance in biomedical research and diagnostics (e.g. cell counting, morphometric feature extraction, tumor grading, prognostic biomarker extraction). The modern approach to the problem is the use of deep learning architectures developed to encompass the main challenges of separating overlapping or fused nuclei. The availability of few humanly-annotated datasets poses another challenge to the problem.
Object detection
Pedestrian detection
Face detection
Brake light detection
Locate objects in satellite images (roads, forests, crops, etc.)
Recognition Tasks
Face recognition
Fingerprint recognition
Iris recognition
Prohibited Item at Airport security checkpoints
Traffic control systems
Video surveillance
Video object co-segmentation and action localization
Several general-purpose algorithms and techniques have been developed for image segmentation. To be useful, these techniques must typically be combined with a domain's specific knowledge in order to effectively solve the domain's segmentation problems.


== Classes of segmentation techniques ==
There are two classes of segmentation techniques.

Classical computer vision approaches
AI based techniques


== Groups of image segmentation ==
Semantic segmentation is an approach detecting, for every pixel, the belonging class. For example, in a figure with many people, all the pixels belonging to persons will have the same class id and the pixels in the background will be classified as background.
Instance segmentation is an approach that identifies, for every pixel, the specific belonging instance of the object. It detects each distinct object of interest in the image. For example, when each person in a figure is segmented as an individual object.
Panoptic segmentation combines both semantic and instance segmentation. Like semantic segmentation, panoptic segmentation is an approach that identifies, for every pixel, the belonging class. Moreover, like in instance segmentation, panoptic segmentation distinguishes different instances of the same class.


== Thresholding ==

The simplest method of image segmentation is called the thresholding method. This method is based on a clip-level (or a threshold value) to turn a gray-scale image into a binary image.
The key of this method is to select the threshold value (or values when multiple-levels are selected). Several popular methods are used in industry including the maximum entropy method, balanced histogram thresholding, Otsu's method (maximum variance), and k-means clustering.
Recently, methods have been developed for thresholding computed tomography (CT) images. The key idea is that, unlike Otsu's method, the thresholds are derived from the radiographs instead of the (reconstructed) image.
New methods suggest the use of multi-dimensional, fuzzy rule-based, non-linear thresholds. In these approaches, the decision regarding each pixel's membership in a segment is based on multi-dimensional rules derived from fuzzy logic and evolutionary algorithms, considering factors such as image lighting, environment, and application.


== Clustering methods ==

The K-means algorithm is an iterative technique that is used to partition an image into K clusters. The basic algorithm is

Pick K cluster centers, either randomly or based on some heuristic method, for example K-means++
Assign each pixel in the image to the cluster that minimizes the distance between the pixel and the cluster center
Re-compute the cluster centers by averaging all of the pixels in the cluster
Repeat steps 2 and 3 until convergence is attained (i.e. no pixels change clusters)
In this case, distance is the squared or absolute difference between a pixel and a cluster center. The difference is typically based on pixel color, intensity, texture, and location, or a weighted combination of these factors. K can be selected manually, randomly, or by a heuristic. This algorithm is guaranteed to converge, but it may not return the optimal solution. The quality of the solution depends on the initial set of clusters and the value of K.
The Mean Shift algorithm is a technique that is used to partition an image into an unknown apriori number of clusters. This has the advantage of not having to start with an initial guess of such parameter which makes it a better general solution for more diverse cases.


== Motion and interactive segmentation ==
Motion based segmentation is a technique that relies on motion in the image to perform segmentation.
The idea is simple: look at the differences between a pair of images. Assuming the object of interest is moving, the difference will be exactly that object.
Improving on this idea, Kenney et al. proposed interactive segmentation [2]. They use a robot to poke objects in order to generate the motion signal necessary for motion-based segmentation.
Interactive segmentation follows the interactive perception framework proposed by Dov Katz [3] and Oliver Brock [4].
Another technique that is based on motion is rigid motion segmentation.


== Compression-based methods ==
Compression based methods postulate that the optimal segmentation is the one that minimizes, over all possible segmentations, the coding length of the data. The connection between these two concepts is that segmentation tries to find patterns in an image and any regularity in the image can be used to compress it. The method describes each segment by its texture and boundary shape. Each of these components is modeled by a probability distribution function and its coding length is computed as follows:

The boundary encoding leverages the fact that regions in natural images tend to have a smooth contour. This prior is used by Huffman coding to encode the difference chain code of the contours in an image. Thus, the smoother a boundary is, the shorter coding length it attains.
Texture is encoded by lossy compression in a way similar to minimum description length (MDL) principle, but here the length of the data given the model is approximated by the number of samples times the entropy of the model. The texture in each region is modeled by a multivariate normal distribution whose entropy has a closed form expression. An interesting property of this model is that the estimated entropy bounds the true entropy of the data from above. This is because among all distributions with a given mean and covariance, normal distribution has the largest entropy. Thus, the true coding length cannot be more than what the algorithm tries to minimize.
For any given segmentation of an image, this scheme yields the number of bits required to encode that image based on the given segmentation. Thus, among all possible segmentations of an image, the goal is to find the segmentation which produces the shortest coding length. This can be achieved by a simple agglomerative clustering method. The distortion in the lossy compression determines the coarseness of the segmentation and its optimal value may differ for each image. This parameter can be estimated heuristically from the contrast of textures in an image. For example, when the textures in an image are similar, such as in camouflage images, stronger sensitivity and thus lower quantization is required.


== Histogram-based methods ==
Histogram-based methods are very efficient compared to other image segmentation methods because they typically require only one pass through the pixels. In this technique, a histogram is computed from all of the pixels in the image, and the peaks and valleys in the histogram are used to locate the clusters in the image. Color or intensity can be used as the measure.
A refinement of this technique is to recursively apply the histogram-seeking method to clusters in the image in order to divide them into smaller clusters. This operation is repeated with smaller and smaller clusters until no more clusters are formed.
One disadvantage of the histogram-seeking method is that it may be difficult to identify significant peaks and valleys in the image.
Histogram-based approaches can also be quickly adapted to apply to multiple frames, while maintaining their single pass efficiency. The histogram can be done in multiple fashions when multiple frames are considered. The same approach that is taken with one frame can be applied to multiple, and after the results are merged, peaks and valleys that were previously difficult to identify are more likely to be distinguishable. The histogram can also be applied on a per-pixel basis where the resulting information is used to determine the most frequent color for the pixel location. This approach segments based on active objects and a static environment, resulting in a different type of segmentation useful in video tracking.


== Edge detection ==
Edge detection is a well-developed field on its own within image processing. Region boundaries and edges are closely related,
since there is often a sharp adjustment in intensity at the region boundaries. Edge detection techniques have therefore been used as the base of another segmentation technique.
The edges identified by edge detection are often disconnected. To segment an object from an image however, one needs closed region boundaries. The desired edges are the boundaries between such objects or spatial-taxons.
Spatial-taxons are information granules, consisting of a crisp pixel region, stationed at abstraction levels within a hierarchical nested scene architecture. They are similar to the Gestalt psychological designation of figure-ground, but are extended to include foreground, object groups, objects and salient object parts. Edge detection methods can be applied to the spatial-taxon region, in the same manner they would be applied to a silhouette. This method is particularly useful when the disconnected edge is part of an illusory contour
Segmentation methods can also be applied to edges obtained from edge detectors. Lindeberg and Li developed an integrated method that segments edges into straight and curved edge segments for parts-based object recognition, based on a minimum description length (MDL) criterion that was optimized by a split-and-merge-like method with candidate breakpoints obtained from complementary junction cues to obtain more likely points at which to consider partitions into different segments.


== Isolated Point Detection ==
The detection of isolated points in an image is a fundamental part of image segmentation. This process primarily depends on the second derivative, indicating the use of the Laplacian operator. The Laplacian of a function 
  
    
      
        f
        (
        x
        ,
        y
        )
      
    
    {\displaystyle f(x,y)}
  
 is given by:

  
    
      
        
          ∇
          
            2
          
        
        f
        (
        x
        ,
        y
        )
        =
        
          
            
              
                ∂
                
                  2
                
              
              f
            
            
              ∂
              
                x
                
                  2
                
              
            
          
        
        +
        
          
            
              
                ∂
                
                  2
                
              
              f
            
            
              ∂
              
                y
                
                  2
                
              
            
          
        
      
    
    {\displaystyle \nabla ^{2}f(x,y)={\frac {\partial ^{2}f}{\partial x^{2}}}+{\frac {\partial ^{2}f}{\partial y^{2}}}}
  

The Laplacian operator is employed such that the partial derivatives are derived from a specific equation. The second partial derivative of 
  
    
      
        f
        (
        x
        ,
        y
        )
      
    
    {\displaystyle f(x,y)}
  
 with respect to 
  
    
      
        x
      
    
    {\displaystyle x}
  
 and 
  
    
      
        y
      
    
    {\displaystyle y}
  
 are given by:

  
    
      
        
          
            
              
                ∂
                
                  2
                
              
              f
              (
              x
              ,
              y
              )
            
            
              ∂
              
                x
                
                  2
                
              
            
          
        
        =
        f
        (
        x
        +
        1
        ,
        y
        )
        +
        f
        (
        x
        −
        1
        ,
        y
        )
        −
        2
        f
        (
        x
        ,
        y
        )
      
    
    {\displaystyle {\frac {\partial ^{2}f(x,y)}{\partial x^{2}}}=f(x+1,y)+f(x-1,y)-2f(x,y)}
  

  
    
      
        
          
            
              
                ∂
                
                  2
                
              
              f
              (
              x
              ,
              y
              )
            
            
              ∂
              
                y
                
                  2
                
              
            
          
        
        =
        f
        (
        x
        ,
        y
        +
        1
        )
        +
        f
        (
        x
        ,
        y
        −
        1
        )
        −
        2
        f
        (
        x
        ,
        y
        )
      
    
    {\displaystyle {\frac {\partial ^{2}f(x,y)}{\partial y^{2}}}=f(x,y+1)+f(x,y-1)-2f(x,y)}
  

These partial derivatives are then used to compute the Laplacian as:

  
    
      
        
          ∇
          
            2
          
        
        f
        (
        x
        ,
        y
        )
        =
        f
        (
        x
        +
        1
        ,
        y
        )
        +
        f
        (
        x
        −
        1
        ,
        y
        )
        +
        f
        (
        x
        ,
        y
        +
        1
        )
        +
        f
        (
        x
        ,
        y
        −
        1
        )
        −
        4
        f
        (
        x
        ,
        y
        )
      
    
    {\displaystyle \nabla ^{2}f(x,y)=f(x+1,y)+f(x-1,y)+f(x,y+1)+f(x,y-1)-4f(x,y)}
  

This mathematical expression can be implemented by convolving with an appropriate mask. If we extend this equation to three dimensions (x,y,z), the intensity at each pixel location around a central pixel at (x, y, z) is replaced by their corresponding values. This equation becomes particularly useful when we assume that all pixels have unit spacing along each axis.
A sphere mask has been developed for use with three-dimensional datasets. The sphere mask is designed to use only integer arithmetic during calculations, thereby eliminating the need for floating-point hardware or software.
When applying these concepts to actual images represented as arrays of numbers, we need to consider what happens when we reach an edge or border region. The function 
  
    
      
        g
        (
        x
        ,
        y
        )
      
    
    {\displaystyle g(x,y)}
  
 is defined as:

  
    
      
        g
        (
        x
        ,
        y
        )
        =
        
          
            {
            
              
                
                  1
                
                
                  
                    if 
                  
                  
                    |
                  
                  R
                  (
                  x
                  ,
                  y
                  )
                  
                    |
                  
                  ≥
                  T
                
              
              
                
                  0
                
                
                  
                    otherwise
                  
                
              
            
            
          
        
      
    
    {\displaystyle g(x,y)={\begin{cases}1&{\text{if }}|R(x,y)|\geq T\\0&{\text{otherwise}}\end{cases}}}
  

This above equation is used to determine whether a point in the image is an isolated point based on the response magnitude 
  
    
      
        
          |
        
        R
        (
        x
        ,
        y
        )
        
          |
        
      
    
    {\displaystyle |R(x,y)|}
  
 and a threshold value 
  
    
      
        T
      
    
    {\displaystyle T}
  
. If the response magnitude is greater than or equal to the threshold, the function returns 1, indicating the presence of an isolated point; otherwise, it returns 0. This helps in the effective detection and segmentation of isolated points in the image.


== Application of Isolated Point Detection in X-ray Image Processing ==
The detection of isolated points has significant applications in various fields, including X-ray image processing. For instance, an original X-ray image of a turbine blade can be examined pixel-by-pixel to detect porosity in the upper-right quadrant of the blade. The result of applying an edge detector's response to this X-ray image can be approximated. This demonstrates the segmentation of isolated points in an image with the aid of single-pixel probes.


== Dual clustering method ==
This method is a combination of three characteristics of the image: partition of the image based on histogram analysis is checked by high compactness of the clusters (objects), and high gradients of their borders. For that purpose two spaces have to be introduced: one space is the one-dimensional histogram of brightness H = H(B); the second space is the dual 3-dimensional space of the original image itself B = B(x, y). The first space allows to measure how compactly the brightness of the image is distributed by calculating a minimal clustering kmin. Threshold brightness T corresponding to kmin defines the binary (black-and-white) image – bitmap b = φ(x, y), where φ(x, y) = 0, if B(x, y) < T, and φ(x, y) = 1, if B(x, y) ≥ T. The bitmap b is an object in dual space. On that bitmap a measure has to be defined reflecting how compact distributed black (or white) pixels are. So, the goal is to find objects with good borders. For all T the measure MDC = G/(k × L) has to be calculated (where k is difference in brightness between the object and the background, L is length of all borders, and G is mean gradient on the borders). Maximum of MDC defines the segmentation.


== Region-growing methods ==
Region-growing methods rely mainly on the assumption that the neighboring pixels within one region have similar values. The common procedure is to compare one pixel with its neighbors. If a similarity criterion is satisfied, the pixel can be set to belong to the same cluster as one or more of its neighbors. The selection of the similarity criterion is significant and the results are influenced by noise in all instances.
The method of Statistical Region Merging (SRM) starts by building the graph of pixels using 4-connectedness with edges weighted by the absolute value of the intensity difference. Initially each pixel forms a single pixel region. SRM then sorts those edges in a priority queue and decides whether or not to merge the current regions belonging to the edge pixels using a statistical predicate.
One region-growing method is the seeded region growing method. This method takes a set of seeds as input along with the image. The seeds mark each of the objects to be segmented. The regions are iteratively grown by comparison of all unallocated neighboring pixels to the regions. The difference between a pixel's intensity value and the region's mean, 
  
    
      
        δ
      
    
    {\displaystyle \delta }
  
, is used as a measure of similarity. The pixel with the smallest difference measured in this way is assigned to the respective region. This process continues until all pixels are assigned to a region. Because seeded region growing requires seeds as additional input, the segmentation results are dependent on the choice of seeds, and noise in the image can cause the seeds to be poorly placed.
Another region-growing method is the unseeded region growing method. It is a modified algorithm that does not require explicit seeds. It starts with a single region 
  
    
      
        
          A
          
            1
          
        
      
    
    {\displaystyle A_{1}}
  
—the pixel chosen here does not markedly influence the final segmentation. At each iteration it considers the neighboring pixels in the same way as seeded region growing. It differs from seeded region growing in that if the minimum 
  
    
      
        δ
      
    
    {\displaystyle \delta }
  
 is less than a predefined threshold 
  
    
      
        T
      
    
    {\displaystyle T}
  
 then it is added to the respective region 
  
    
      
        
          A
          
            j
          
        
      
    
    {\displaystyle A_{j}}
  
. If not, then the pixel is considered different from all current regions 
  
    
      
        
          A
          
            i
          
        
      
    
    {\displaystyle A_{i}}
  
 and a new region 
  
    
      
        
          A
          
            n
            +
            1
          
        
      
    
    {\displaystyle A_{n+1}}
  
 is created with this pixel.
One variant of this technique, proposed by Haralick and Shapiro (1985), is based on pixel intensities. The mean and scatter of the region and the intensity of the candidate pixel are used to compute a test statistic. If the test statistic is sufficiently small, the pixel is added to the region, and the region's mean and scatter are recomputed. Otherwise, the pixel is rejected, and is used to form a new region.
A special region-growing method is called 
  
    
      
        λ
      
    
    {\displaystyle \lambda }
  
-connected segmentation (see also lambda-connectedness). It is based on pixel intensities and neighborhood-linking paths. A degree of connectivity (connectedness) is calculated based on a path that is formed by pixels. For a certain value of 
  
    
      
        λ
      
    
    {\displaystyle \lambda }
  
, two pixels are called 
  
    
      
        λ
      
    
    {\displaystyle \lambda }
  
-connected if there is a path linking those two pixels and the connectedness of this path is at least 
  
    
      
        λ
      
    
    {\displaystyle \lambda }
  
. 
  
    
      
        λ
      
    
    {\displaystyle \lambda }
  
-connectedness is an equivalence relation.
Split-and-merge segmentation is based on a quadtree partition of an image. It is sometimes called quadtree segmentation.
This method starts at the root of the tree that represents the whole image. If it is found non-uniform (not homogeneous), then it is split into four child squares (the splitting process), and so on. If, in contrast, four child squares are homogeneous, they are merged as several connected components (the merging process). The node in the tree is a segmented node. This process continues recursively until no further splits or merges are possible. When a special data structure is involved in the implementation of the algorithm of the method, its time complexity can reach 
  
    
      
        O
        (
        n
        log
        ⁡
        n
        )
      
    
    {\displaystyle O(n\log n)}
  
, an optimal algorithm of the method.


== Partial differential equation-based methods ==
Using a partial differential equation (PDE)-based method and solving the PDE equation by a numerical scheme, one can segment the image. Curve propagation is a popular technique in this category, with numerous applications to object extraction, object tracking, stereo reconstruction, etc. The central idea is to evolve an initial curve towards the lowest potential of a cost function, where its definition reflects the task to be addressed. As for most inverse problems, the minimization of the cost functional is non-trivial and imposes certain smoothness constraints on the solution, which in the present case can be expressed as geometrical constraints on the evolving curve.


=== Parametric methods ===
Lagrangian techniques are based on parameterizing the contour according to some sampling strategy and then evolving each element according to image and internal terms. Such techniques are fast and efficient, however the original "purely parametric" formulation (due to Kass, Witkin and Terzopoulos in 1987 and known as "snakes"), is generally criticized for its limitations regarding the choice of sampling strategy, the internal geometric properties of the curve, topology changes (curve splitting and merging), addressing problems in higher dimensions, etc.. Nowadays, efficient "discretized" formulations have been developed to address these limitations while maintaining high efficiency. In both cases, energy minimization is generally conducted using a steepest-gradient descent, whereby derivatives are computed using, e.g., finite differences.


=== Level-set methods ===
The level-set method was initially proposed to track moving interfaces by Dervieux and Thomasset in 1979 and 1981 and was later reinvented by Osher and Sethian in 1988. This has spread across various imaging domains in the late 1990s. It can be used to efficiently address the problem of curve/surface/etc. propagation in an implicit manner. The central idea is to represent the evolving contour using a signed function whose zero corresponds to the actual contour. Then, according to the motion equation of the contour, one can easily derive a similar flow for the implicit surface that when applied to the zero level will reflect the propagation of the contour. The level-set method affords numerous advantages: it is implicit, is parameter-free, provides a direct way to estimate the geometric properties of the evolving structure, allows for change of topology, and is intrinsic. It can be used to define an optimization framework, as proposed by Zhao, Merriman and Osher in 1996. One can conclude that it is a very convenient framework for addressing numerous applications of computer vision and medical image analysis. Research into various level-set data structures has led to very efficient implementations of this method.


=== Fast marching methods ===
The fast marching method has been used in image segmentation, and this model has been improved (permitting both positive and negative propagation speeds) in an approach called the generalized fast marching method.


== Variational methods ==
The goal of variational methods is to find a segmentation
which is optimal with respect to a specific energy functional. The functionals consist of a data fitting term and a regularizing terms. A classical representative is the Potts model defined for an image 
  
    
      
        f
      
    
    {\displaystyle f}
  
 by

  
    
      
        
          argmin
          
            u
          
        
        ⁡
        γ
        ‖
        ∇
        u
        
          ‖
          
            0
          
        
        +
        ∫
        (
        u
        −
        f
        
          )
          
            2
          
        
        
        d
        x
        .
      
    
    {\displaystyle \operatorname {argmin} _{u}\gamma \|\nabla u\|_{0}+\int (u-f)^{2}\,dx.}
  

A minimizer 
  
    
      
        
          u
          
            ∗
          
        
      
    
    {\displaystyle u^{*}}
  
 is a piecewise constant image which has an optimal tradeoff between the squared L2 distance to the given image 
  
    
      
        f
      
    
    {\displaystyle f}
  
 and the total length of its jump set. The jump set of 
  
    
      
        
          u
          
            ∗
          
        
      
    
    {\displaystyle u^{*}}
  
 defines a segmentation. The relative weight of the energies is tuned by the parameter 
  
    
      
        γ
        >
        0
      
    
    {\displaystyle \gamma >0}
  
. The binary variant of the Potts model, i.e., if the range of 
  
    
      
        u
      
    
    {\displaystyle u}
  
 is restricted to two values, is often called Chan-Vese model. An important generalization is the Mumford-Shah model given by

  
    
      
        
          argmin
          
            u
            ,
            K
          
        
        ⁡
        γ
        
          |
        
        K
        
          |
        
        +
        μ
        
          ∫
          
            
              K
              
                C
              
            
          
        
        
          |
        
        ∇
        u
        
          
            |
          
          
            2
          
        
        
        d
        x
        +
        ∫
        (
        u
        −
        f
        
          )
          
            2
          
        
        
        d
        x
        .
      
    
    {\displaystyle \operatorname {argmin} _{u,K}\gamma |K|+\mu \int _{K^{C}}|\nabla u|^{2}\,dx+\int (u-f)^{2}\,dx.}
  

The functional value is the sum of the total length of the segmentation curve 
  
    
      
        K
      
    
    {\displaystyle K}
  
, the smoothness of the approximation 
  
    
      
        u
      
    
    {\displaystyle u}
  
, and its distance to the original image 
  
    
      
        f
      
    
    {\displaystyle f}
  
. The weight of the smoothness penalty is adjusted by 
  
    
      
        μ
        >
        0
      
    
    {\displaystyle \mu >0}
  
. The Potts model is often called piecewise constant Mumford-Shah model as it can be seen as the degenerate case 
  
    
      
        μ
        →
        ∞
      
    
    {\displaystyle \mu \to \infty }
  
. The optimization problems are known to be NP-hard in general but near-minimizing strategies work well in practice. Classical algorithms are graduated non-convexity and Ambrosio-Tortorelli approximation.


== Graph partitioning methods ==
Graph partitioning methods are an effective tools for image segmentation since they model the impact of pixel neighborhoods on a given cluster of pixels or pixel, under the assumption of homogeneity in images. In these methods, the image is modeled as a weighted, undirected graph. Usually a pixel or a group of pixels are associated with nodes and edge weights define the (dis)similarity between the neighborhood pixels. The graph (image) is then partitioned according to a criterion designed to model "good" clusters. Each partition of the nodes (pixels) output from these algorithms are considered an object segment in the image; see Segmentation-based object categorization. Some popular algorithms of this category are normalized cuts, random walker, minimum cut, isoperimetric partitioning, minimum spanning tree-based segmentation, and segmentation-based object categorization.


=== Markov random fields ===
The application of Markov random fields (MRF) for images was suggested in early 1984 by Geman and Geman. Their strong mathematical foundation and ability to provide a global optimum even when defined on local features proved to be the foundation for novel research in the domain of image analysis, de-noising and segmentation. MRFs are completely characterized by their prior probability distributions, marginal probability distributions, cliques, smoothing constraint as well as criterion for updating values. The criterion for image segmentation using MRFs is restated as finding the labelling scheme which has maximum probability for a given set of features. The broad categories of image segmentation using MRFs are supervised and unsupervised segmentation.


==== Supervised image segmentation using MRF and MAP ====
In terms of image segmentation, the function that MRFs seek to maximize is the probability of identifying a labelling scheme given a particular set of features are detected in the image. This is a restatement of the maximum a posteriori estimation method.

The generic algorithm for image segmentation using MAP is given below:


==== Optimization algorithms ====
Each optimization algorithm is an adaptation of models from a variety of fields and they are set apart by their unique cost functions. The common trait of cost functions is to penalize change in pixel value as well as difference in pixel label when compared to labels of neighboring pixels.


===== Iterated conditional modes/gradient descent =====
The iterated conditional modes (ICM) algorithm tries to reconstruct the ideal labeling scheme by changing the values of each pixel over each iteration and evaluating the energy of the new labeling scheme using the cost function given below,

  
    
      
        α
        (
        1
        −
        δ
        (
        
          ℓ
          
            i
          
        
        −
        
          ℓ
          
            
              initial 
            
            i
          
        
        )
        +
        β
        
          Σ
          
            q
            ∈
            N
            (
            i
            )
          
        
        (
        1
        −
        δ
        (
        
          ℓ
          
            i
          
        
        ,
        
          ℓ
          
            q
            (
            i
            )
          
        
        )
        )
        .
      
    
    {\displaystyle \alpha (1-\delta (\ell _{i}-\ell _{{\text{initial }}i})+\beta \Sigma _{q\in N(i)}(1-\delta (\ell _{i},\ell _{q(i)})).}
  

where α is the penalty for change in pixel label and β is the penalty for difference in label between
neighboring pixels and chosen pixel. Here 
  
    
      
        N
        (
        i
        )
      
    
    {\displaystyle N(i)}
  
 is neighborhood of pixel i and δ is the Kronecker delta function. A major issue with ICM is that, similar to gradient descent, it has a tendency to rest over local maxima and thus not obtain a globally optimal labeling scheme.


===== Simulated annealing (SA) =====
Derived as an analogue of annealing in metallurgy, simulated annealing (SA) uses change in pixel label over iterations and estimates the difference in energy of each newly formed graph to the initial data. If the newly formed graph is more profitable, in terms of low energy cost, given by:

  
    
      
        Δ
        U
        =
        
          U
          
            new
          
        
        −
        
          U
          
            old
          
        
      
    
    {\displaystyle \Delta U=U^{\text{new}}-U^{\text{old}}}
  

  
    
      
        
          ℓ
          
            i
          
        
        =
        
          
            {
            
              
                
                  
                    ℓ
                    
                      i
                    
                    
                      new
                    
                  
                  ,
                
                
                  
                    if 
                  
                  Δ
                  U
                  ≤
                  0
                  ,
                
              
              
                
                  
                    ℓ
                    
                      i
                    
                    
                      new
                    
                  
                  ,
                
                
                  
                    if 
                  
                  Δ
                  U
                  >
                  0
                  
                     and 
                  
                  δ
                  <
                  
                    e
                    
                      −
                      Δ
                      U
                      
                        /
                      
                      T
                    
                  
                  ,
                  
                    ℓ
                    
                      i
                    
                    
                      old
                    
                  
                
              
            
            
          
        
      
    
    {\displaystyle \ell _{i}={\begin{cases}\ell _{i}^{\text{new}},&{\text{if }}\Delta U\leq 0,\\\ell _{i}^{\text{new}},&{\text{if }}\Delta U>0{\text{ and }}\delta <e^{-\Delta U/T},\ell _{i}^{\text{old}}\end{cases}}}
  

the algorithm selects the newly formed graph. Simulated annealing requires the input of temperature schedules which directly affects the speed of convergence of the system, as well as energy threshold for minimization to occur.


===== Alternative algorithms =====
A range of other methods exist for solving simple as well as higher order MRFs. They include Maximization of Posterior Marginal, Multi-scale MAP estimation, Multiple Resolution segmentation and more. Apart from likelihood estimates, graph-cut using maximum flow and other highly constrained graph based methods exist for solving MRFs.


==== Image segmentation using MAP and expectation–maximization ====
The expectation–maximization algorithm is utilized to iteratively estimate the a posterior probabilities and distributions of labeling when no training data is available and no estimate of segmentation model can be formed. A general approach is to use histograms to represent the features of an image and proceed as outlined briefly in this three-step algorithm:
1. A random estimate of the model parameters is utilized.
2. E step: Estimate class statistics based on the random segmentation model defined. Using these, compute the conditional probability of belonging to a label given the feature set is calculated using naive Bayes' theorem.

  
    
      
        P
        (
        λ
        ∣
        
          f
          
            i
          
        
        )
        =
        
          
            
              P
              (
              
                f
                
                  i
                
              
              ∣
              λ
              )
              P
              (
              λ
              )
            
            
              
                Σ
                
                  λ
                  ∈
                  Λ
                
              
              P
              (
              
                f
                
                  i
                
              
              ∣
              λ
              )
              P
              (
              λ
              )
            
          
        
      
    
    {\displaystyle P(\lambda \mid f_{i})={\frac {P(f_{i}\mid \lambda )P(\lambda )}{\Sigma _{\lambda \in \Lambda }P(f_{i}\mid \lambda )P(\lambda )}}}
  

Here 
  
    
      
        λ
        ∈
        Λ
      
    
    {\displaystyle \lambda \in \Lambda }
  
, the set of all possible labels.
3. M step: The established relevance of a given feature set to a labeling scheme is now used to compute the a priori estimate of a given label in the second part of the algorithm. Since the actual number of total labels is unknown (from a training data set), a hidden estimate of the number of labels given by the user is utilized in computations.

  
    
      
        P
        (
        λ
        )
        =
        
          
            
              
                Σ
                
                  λ
                  ∈
                  Λ
                
              
              P
              (
              λ
              ∣
              
                f
                
                  i
                
              
              )
            
            
              
                |
              
              Ω
              
                |
              
            
          
        
      
    
    {\displaystyle P(\lambda )={\frac {\Sigma _{\lambda \in \Lambda }P(\lambda \mid f_{i})}{|\Omega |}}}
  

where 
  
    
      
        Ω
      
    
    {\displaystyle \Omega }
  
 is the set of all possible features.


==== Disadvantages of MAP and EM based image segmentation ====
Exact MAP estimates cannot be easily computed.
Approximate MAP estimates are computationally expensive to calculate.
Extension to multi-class labeling degrades performance and increases storage required.
Reliable estimation of parameters for EM is required for global optima to be achieved.
Based on method of optimization, segmentation may cluster to local minima.


== Watershed transformation ==
The watershed transformation considers the gradient magnitude of an image as a topographic surface. Pixels having the highest gradient magnitude intensities (GMIs) correspond to watershed lines, which represent the region boundaries. Water placed on any pixel enclosed by a common watershed line flows downhill to a common local intensity minimum (LIM). Pixels draining to a common minimum form a catch basin, which represents a segment.


== Model-based segmentation ==
The central assumption of model-based approaches is that the structures of interest have a tendency towards a particular shape. Therefore, one can seek a probabilistic model that characterizes the shape and its variation. When segmenting an image, constraints can be imposed using this model as a prior. Such a task may involve (i) registration of the training examples to a common pose, (ii) probabilistic representation of the variation of the registered samples, and (iii) statistical inference between the model and the image. Other important methods in the literature for model-based segmentation include active shape models and active appearance models.


== Multi-scale segmentation ==
Image segmentations are computed at multiple scales in scale space and sometimes propagated from coarse to fine scales; see scale-space segmentation.
Segmentation criteria can be arbitrarily complex and may take into account global as well as local criteria. A common requirement is that each region must be connected in some sense.


=== One-dimensional hierarchical signal segmentation ===
Witkin's seminal work in scale space included the notion that a one-dimensional signal could be unambiguously segmented into regions, with one scale parameter controlling the scale of segmentation.
A key observation is that the zero-crossings of the second derivatives (minima and maxima of the first derivative or slope) of multi-scale-smoothed versions of a signal form a nesting tree, which defines hierarchical relations between segments at different scales. Specifically, slope extrema at coarse scales can be traced back to corresponding features at fine scales. When a slope maximum and slope minimum annihilate each other at a larger scale, the three segments that they separated merge into one segment, thus defining the hierarchy of segments.


=== Image segmentation and primal sketch ===
There have been numerous research works in this area, out of which a few have now reached a state where they can be applied either with interactive manual intervention (usually with application to medical imaging) or fully automatically. The following is a brief overview of some of the main research ideas that current approaches are based upon.
The nesting structure that Witkin described is, however, specific for one-dimensional signals and does not trivially transfer to higher-dimensional images. Nevertheless, this general idea has inspired several other authors to investigate coarse-to-fine schemes for image segmentation. Koenderink proposed to study how iso-intensity contours evolve over scales and this approach was investigated in more detail by Lifshitz and Pizer. Unfortunately, however, the intensity of image features changes over scales, which implies that it is hard to trace coarse-scale image features to finer scales using iso-intensity information.
Lindeberg studied the problem of linking local extrema and saddle points over scales, and proposed an image representation called the scale-space primal sketch which makes explicit the relations between structures at different scales, and also makes explicit which image features are stable over large ranges of scale including locally appropriate scales for those. Bergholm proposed to detect edges at coarse scales in scale-space and then trace them back to finer scales with manual choice of both the coarse detection scale and the fine localization scale.
Gauch and Pizer studied the complementary problem of ridges and valleys at multiple scales and developed a tool for interactive image segmentation based on multi-scale watersheds. The use of multi-scale watershed with application to the gradient map has also been investigated by Olsen and Nielsen and been carried over to clinical use by Dam. Vincken et al. proposed a hyperstack for defining probabilistic relations between image structures at different scales. The use of stable image structures over scales has been furthered by Ahuja and his co-workers into a fully automated system. A fully automatic brain segmentation algorithm based on closely related ideas of multi-scale watersheds has been presented by Undeman and Lindeberg and been extensively tested in brain databases.
These ideas for multi-scale image segmentation by linking image structures over scales have also been picked up by Florack and Kuijper. Bijaoui and Rué associate structures detected in scale-space above a minimum noise threshold into an object tree which spans multiple scales and corresponds to a kind of feature in the original signal. Extracted features are accurately reconstructed using an iterative conjugate gradient matrix method.


== Semi-automatic segmentation ==
In one kind of segmentation, the user outlines the region of interest with the mouse clicks and algorithms are applied so that the path that best fits the edge of the image is shown.
Techniques like SIOX, Livewire, Intelligent Scissors or IT-SNAPS are used in this kind of segmentation. In an alternative kind of semi-automatic segmentation, the algorithms return a spatial-taxon (i.e. foreground, object-group, object or object-part) selected by the user or designated via prior probabilities.


== Trainable segmentation ==
Most of the aforementioned segmentation methods are based only on color information of pixels in the image. Humans use much more knowledge when performing image segmentation, but implementing this knowledge would cost considerable human engineering and computational time, and would require a huge domain knowledge database which does not currently exist. Trainable segmentation methods, such as neural network segmentation, overcome these issues by modeling the domain knowledge from a dataset of labeled pixels.
An image segmentation neural network can process small areas of an image to extract simple features such as edges. Another neural network, or any decision-making mechanism, can then combine these features to label the areas of an image accordingly. A type of network designed this way is the Kohonen map.
Pulse-coupled neural networks (PCNNs) are neural models proposed by modeling a cat's visual cortex and developed for high-performance biomimetic image processing. In 1989, Reinhard Eckhorn introduced a neural model to emulate the mechanism of a cat's visual cortex. The Eckhorn model provided a simple and effective tool for studying the visual cortex of small mammals, and was soon recognized as having significant application potential in image processing. In 1994, the Eckhorn model was adapted to be an image processing algorithm by John L. Johnson, who termed this algorithm Pulse-Coupled Neural Network. Over the past decade, PCNNs have been utilized for a variety of image processing applications, including: image segmentation, feature generation, face extraction, motion detection, region growing, noise reduction, and so on. A PCNN is a two-dimensional neural network. Each neuron in the network corresponds to one pixel in an input image, receiving its corresponding pixel's color information (e.g. intensity) as an external stimulus. Each neuron also connects with its neighboring neurons, receiving local stimuli from them. The external and local stimuli are combined in an internal activation system, which accumulates the stimuli until it exceeds a dynamic threshold, resulting in a pulse output. Through iterative computation, PCNN neurons produce temporal series of pulse outputs. The temporal series of pulse outputs contain information of input images and can be utilized for various image processing applications, such as image segmentation and feature generation. Compared with conventional image processing means, PCNNs have several significant merits, including robustness against noise, independence of geometric variations in input patterns, capability of bridging minor intensity variations in input patterns, etc.
In 2015, convolutional neural networks reached state of the art in semantic segmentation. U-Net is an architecture which takes as input an image and outputs a label for each pixel. U-Net initially was developed to detect cell boundaries in biomedical images. U-Net follows classical autoencoder architecture, as such it contains two sub-structures. The encoder structure follows the traditional stack of convolutional and max pooling layers to increase the receptive field as it goes through the layers. It is used to capture the context in the image. The decoder structure utilizes transposed convolution layers for upsampling so that the end dimensions are close to that of the input image. Skip connections are placed between convolution and transposed convolution layers of the same shape in order to preserve details that would have been lost otherwise.
In addition to pixel-level semantic segmentation tasks which assign a given category to each pixel, modern segmentation applications include instance-level semantic segmentation tasks in which each individual in a given category must be uniquely identified, as well as panoptic segmentation tasks which combines these two tasks to provide a more complete scene segmentation.


== Segmentation of related images and videos ==

Related images such as a photo album or a sequence of video frames often contain semantically similar objects and scenes, therefore it is often beneficial to exploit such correlations. The task of simultaneously segmenting scenes from related images or video frames is termed co-segmentation, which is typically used in human action localization. Unlike conventional bounding box-based object detection, human action localization methods provide finer-grained results, typically per-image segmentation masks delineating the human object of interest and its action category (e.g., Segment-Tube). Techniques such as dynamic Markov Networks, CNN and LSTM are often employed to exploit the inter-frame correlations.


== Other methods ==
There are many other methods of segmentation like multispectral segmentation or connectivity-based segmentation based on DTI images.


== See also ==
Object co-segmentation – Image segmentation in computer vision
Computer vision – Computerized information extraction from images
Image-based meshing
Range image segmentation
Vector quantization – Classical quantization technique from signal processing
Image quantization – Lossy compression techniquePages displaying short descriptions of redirect targets
Color quantization – Image processing technique
Object-based image analysis – Extraction of information from images via digital image processing techniquesPages displaying short descriptions of redirect targets
List of manual image annotation tools
Rigid motion segmentation
Text segmentation – Human writing practice


== Notes ==


== References ==


== External links ==
Some sample code that performs basic segmentation, by Syed Zainudeen. University Technology of Malaysia.
Generalized Fast Marching method by Forcadel et al. [2008] for applications in image segmentation.
Image Processing Research Group An Online Open Image Processing Research Community.
Segmentation methods in image processing and analysis and Minimizing energy to segment images by Mathworks
More image segmentation methods with detailed algorithms Archived 1 November 2019 at the Wayback Machine by Yu-Hsiang Wang (王昱翔), National Taiwan University, Taipei, Taiwan, ROC
Online demonstration of piecewise linear image segmentation by IPOL Journal